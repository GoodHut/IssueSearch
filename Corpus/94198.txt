 URL : "https://github.com/angular/angular-cli/issues/7697" TITLE : bug commonjs : tsundefined BODY : <!-- if you don't fill out the following information your issue might be closed without investigating --> bug report or feature request mark with an x - x bug report -> please search issues before submitting - feature request versions. <!-- output from: ng --version . if nothing, output from: node --version and npm --version . windows 7/8/10 . linux incl. distribution . macos el capitan? sierra? --> @angular/cli: 1.5.0-beta.0 node: 8.4.0 os: linux x64 @angular/animations: 5.0.0-beta.7 @angular/cdk: 2.0.0-beta.11-2f1f0fd @angular/cli: 1.5.0-beta.0 @angular/common: 5.0.0-beta.7 @angular/compiler: 5.0.0-beta.7 @angular/core: 5.0.0-beta.7 @angular/flex-layout: 2.0.0-beta.9-5f198a3 @angular/forms: 5.0.0-beta.7 @angular/http: 5.0.0-beta.7 @angular/material: 2.0.0-beta.11-2f1f0fd @angular/platform-browser: 5.0.0-beta.7 @angular/platform-browser-dynamic: 5.0.0-beta.7 @angular/platform-server: 5.0.0-beta.7 @angular/router: 5.0.0-beta.7 @angular/app-shell: 0.1.0 @angular/compiler-cli: 5.0.0-beta.7 @angular/language-service: 5.0.0-beta.7 @angular/service-worker: 1.0.0-beta.16 typescript: 2.4.2 repro steps. <!-- simple steps to reproduce this bug. please include: commands run, packages added, related code changes. a link to a sample repo would help too. --> try to build a commonjs bundle. the build will finish, but the bundle will be several factors of size too small. the exact build command used: ng build --prod --build-optimizer --app universal --output-hashing=none the log given by the failure. <!-- normally this include a stack trace and some more information. --> error in error tsundefined: desired functionality. <!-- what would like to see implemented? what is the usecase? --> build should complete successfully as it did before 1.5.0-beta.0