 URL : "https://github.com/GaloisInc/cryptol/issues/437" TITLE : parsing bug ? BODY : the following snippet of cryptol code used to be accepted, but now does not parse. i feel like it probably should still be accepted. // make a buggy version of fib state machine which returns wrong value // when state counter has magic value. mk_buggy_fib_no_init : {a} fin a, a >= 1 => a -> 1 , 8 , 8 , a -> 8 , 8 , 8 , a mk_buggy_fib_no_init magic _, fn, fn1, k = fn', fn1, fn2, k+1 where fn2 = fn + fn1 // change output when state has magic value. fn' = fn + if k == magic then 1 else 0 the problem occurs on the final line, where the if keyword seems to interact badly with the + operator. adding parens around the if then else causes the code to be accepted.