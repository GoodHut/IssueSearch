 URL : "https://github.com/citycide/trilogy/issues/35" TITLE : inject function in sql BODY : i see that sql.js has a create_function that should/could work like this: javascript const sum = a => a + 10; db.create_function 'sum', sum ; db.knex 'some-table' .select 'sum col as foo' ; however this is not possible. the create_function is available only if i use: javascript const client = await db.pool.acquire ; // acquire is from generic-pool client.create_function 'sum', sum ; const query = db.knex 'some-table' .select 'sum col as foo' ; const res = await db.raw query, true ; console.log 'res', res ; // never reach this log db.pool.release client ; if i use another approach: javascript return new promise resolve, reject => { db.pool.acquire .then client => { var sum = a => a + '...'; client.create_function 'sum', sum ; const query = db.knex 'some-table' .select db.knex.raw 'sum valorparcela ' ; const res = db.raw query, true ; db.pool.release client ; resolve res ; } ; } ; then i get error: no such function: sum which looks obvious because of db.knex.raw . wow, that was long. maybe was easier if you expose the sql.js client?