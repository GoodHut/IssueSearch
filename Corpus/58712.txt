 URL : "https://github.com/cloudfoundry/gorouter/issues/204" TITLE : steady memory increase BODY : issue we experience a steady memory increase of our gorouters over time. this seems currently not cause an issue. when the routers gets restarted it takes multiple days until the memory consumption is > 50%. ! router_memory_usage https://user-images.githubusercontent.com/16102838/34385653-8765ff9c-eb24-11e7-89a5-3b358aac94af.png context we are using gorouter within cf-deployment v1.0.0, routing-release v0.166.0 . ssl is not terminated on the gorouter. we cannot really correlate the first occurrence of this phenomenon with an update or change to the landscape. the memory increase also seems not to correlate with other metrics like e.g. total_requests or total_routes . the cpu usage is constantly < 20%. for an exemplary router with 35% memory usage, most memory seems to be consumed by bufio.newwritersize net/http. transport .getconn . it looks similar for a router with > 80% memory usage. netstat and lsof do not indicate issues on the corresponding routers e.g. too many open connections etc . attached goroutines and heap: gorouter_heap.txt https://github.com/cloudfoundry/gorouter/files/1589403/gorouter_heap.txt gorouter_goroutines.txt https://github.com/cloudfoundry/gorouter/files/1589404/gorouter_goroutines.txt ! profile001 https://user-images.githubusercontent.com/16102838/34386566-951022c6-eb29-11e7-8d03-d64ce24d0e85.png steps to reproduce we were not able to reproduce this on a test landscape. expected result constant memory usage. current result steady memory increase.