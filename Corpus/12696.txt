 URL : "https://github.com/hakaru-dev/hakaru/issues/57" TITLE : regression in kb BODY : given the following with kb : with hakaru : kb := kb constrain i = hakaru:-idx hakaru:-idx t, k , i专 , introduce i专, hint bound >= , 0 , bound <= , hakaru:-size hakaru:-idx t, k -1 , introduce i, hint bound >= , 0 , bound <= , hakaru:-size hakaru:-idx t, k -2 , introduce k, hint bound >= , 0 , bound <= , hakaru:-size t -1 , introduce t, harray harray hint bound >= , 0 ; cond := hakaru:-idx hakaru:-idx t, k , i专 +1 = hakaru:-size hakaru:-idx t, k ; res := assert not cond , kb on stable, res is equal to the original kb. on master, the condition is added to the kb as a constrain . this breaks the simplification of dice_index , as the extra condition appears in a match expression in the result.