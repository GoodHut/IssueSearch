 URL : "https://github.com/civetweb/civetweb/issues/407" TITLE : builld of slib fails BODY : hi, build of slib is broken on master, due to a space in version information got by grep & sed. the following patch fixes the issue: diff --git a/makefile b/makefile index bd78459..3a12c3a 100644 --- a/makefile +++ b/makefile @@ -247,7 +247,7 @@ slib: lib$ cprog .$ shared_lib clean: $ rmrf $ build_dir - $ eval version=$ shell grep define civetweb_version include/civetweb.h | sed 's|. version \ . \ |\1|g' + $ eval version=$ shell grep define civetweb_version include/civetweb.h | sed 's|. version \ . \ |\1|g' $ eval major=$ shell echo $ version | cut -d'.' -f1 $ rmrf lib$ cprog .a $ rmrf lib$ cprog .so @@ -269,7 +269,7 @@ lib$ cprog .a: $ lib_objects lib$ cprog .so: cflags += -fpic lib$ cprog .so: $ lib_objects - $ eval version=$ shell grep define civetweb_version include/civetweb.h | sed 's|. version \ . \ |\1|g' + $ eval version=$ shell grep define civetweb_version include/civetweb.h | sed 's|. version \ . \ |\1|g' $ eval major=$ shell echo $ version | cut -d'.' -f1 $ lcc -shared -wl,-soname,$@.$ major -o $@.$ version .0 $ cflags $ ldflags $ lib_objects ln -s -f $@.$ major $@