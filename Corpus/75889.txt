 URL : "https://github.com/fish-shell/fish-shell/issues/4506" TITLE : implement history insert BODY : fish 2.6.0 i have created two functions that would be interesting to have ported as plugins. one is a precision calculator directly from the prompt ex. running 3 1/2 returns 1.5 instead of command not found , and the other runs thefuck https://github.com/nvbn/thefuck automatically on the fish_command_not_found event. now, both of them write to the history file, and would benefit greatly from a history insert command. i'm currently using the following: if set -q fish_history set __fish_history $fish_history else if set -q xdg_data_home set __fish_history $xdg_data_home/fish/fish_history else set __fish_history ~/.local/share/fish/fish_history end echo -e '- cmd: ' commandline ' when: ' date +%s >>$__fish_history history --merge the problem with this approach is that commandline is written to the history file as is without considering newlines, without escaping special characters, etc. and, of course, history --merge brings the undesired side-effect of merging history from all other sessions.