 URL : "https://github.com/Microsoft/clrmd/issues/60" TITLE : multi attach not working BODY : datatarget behaves strange when i attach to more than one processes at a time. the returned heaps from both processes are identical which cannot be. wrong: d:\source\git\clrmd\src>d:\source\git\clrmd\src\multiattach\bin\debug\multiattach.exe 15728 7832 heap: clrheap 22.434048mb 3 segments, heap2: clrheap 22.434048mb 3 segments expected: d:\source\git\clrmd\src>d:\source\git\clrmd\src\multiattach\bin\debug\multiattach.exe 15728 7832 heap: clrheap 110.382284mb 8 segments, heap2: clrheap 22.434048mb 3 segments source: using microsoft.diagnostics.runtime; using system; namespace multiattach { class program { static void main string args { datatarget t2 = null; var t1 = datatarget.attachtoprocess int.parse args 0 , 5000 ; try { clrheap heap2 = null; var runtime1 = t1.clrversions 0 .createruntime ; //var heap = runtime1.getheap ; // this works strangely if args.length > 1 { t2 = datatarget.attachtoprocess int.parse args 1 , 5000 ; var runtime2 = t2.clrversions 0 .createruntime ; heap2 = runtime2.getheap ; } var heap = runtime1.getheap ; // this returns the same heap!!!! console.writeline $ heap: {heap}, heap2: {heap2} ; } finally { if t1 != null t1.dispose ; if t2 != null t2.dispose ; } } } }