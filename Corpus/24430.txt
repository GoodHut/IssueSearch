 URL : "https://github.com/Lokiedu/libertysoil-site/issues/903" TITLE : story post backend BODY : to create a story post, set type to 'story' and text_type to either 'markdown' or 'html' . next, back-end processes text_source according to text_type and outputs the result into text . keep in mind that some controllers that return a collection of posts do not include text and text_source by default anymore. add ?fields=+text,text_source query to include those fields prefix with + to extend default list of fields . the pr also contains a complete refactoring of createpost and updatepost controllers. the motivation for this change is that it's getting harder to manage and validate all text post invariants short_text, long_text, story . each type of a post requires a different treatment and it makes the createpost and updatepost controllers too convoluted. i'm also working on validation of posts using joi. the pr may be merged as it is, i going to make a separate pr later, but for now validation errors are being sent with the 500 code instead of 400 . x make title optional. x save first image url to more.image.url x save first two paragraphs of text to more.shorttext x exclude text and text_source columns from post lists. all get /posts/ methods x columns: text_source , text_type , text x for non-story posts, save text into both text_source and text x for story posts, text contains processed text which is safe to be rendered using dangerouslysetinnerhtml x text_type can only be markdown or html . no plain text. fix controllers after 868 is merged. the client side needs to be refactored to use more.shorttext instead of text .