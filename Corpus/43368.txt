 URL : "https://github.com/perseas/Pyrseas/issues/155" TITLE : crash with temp table BODY : it seems dbtoyaml is not ignoring temp tables or the internal schema used for temp tables when enumerating the schema and fails in processing while such a table exists. this is quite strange as the temp table should not be visible in other sessions at all. using pyrseas 0.7.3 on osx 10.11.6 with postgresql 9.5.5 on an empty database: bussmann$ dbtoyaml bussmann extension plpgsql: description: pl/pgsql procedural language owner: postgres schema: pg_catalog version: '1.0' schema public: description: standard public schema owner: postgres privileges: - public: - all - postgres: - all now in a new terminal, open psql, connect to the db and create a session temporary table: create temp table test col integer ; - leave the session open. then, run dbtoyaml again: bussmann$ dbtoyaml bussmann traceback most recent call last : file /usr/local/bin/dbtoyaml , line 11, in <module> load_entry_point 'pyrseas==0.7.3', 'console_scripts', 'dbtoyaml' file /usr/local/lib/python3.5/site-packages/pyrseas-0.7.3-py3.5.egg/pyrseas/dbtoyaml.py , line 49, in main dbmap = db.to_map file /usr/local/lib/python3.5/site-packages/pyrseas-0.7.3-py3.5.egg/pyrseas/database.py , line 269, in to_map self.from_catalog file /usr/local/lib/python3.5/site-packages/pyrseas-0.7.3-py3.5.egg/pyrseas/database.py , line 179, in from_catalog self._link_refs self.db file /usr/local/lib/python3.5/site-packages/pyrseas-0.7.3-py3.5.egg/pyrseas/database.py , line 137, in _link_refs db.schemas.link_refs db, copycfg file /usr/local/lib/python3.5/site-packages/pyrseas-0.7.3-py3.5.egg/pyrseas/dbobject/schema.py , line 272, in link_refs link_one targ, type_, keys file /usr/local/lib/python3.5/site-packages/pyrseas-0.7.3-py3.5.egg/pyrseas/dbobject/schema.py , line 250, in link_one schema = self objkeys 0 keyerror: 'pg_temp_2'