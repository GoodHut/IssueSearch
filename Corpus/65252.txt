 URL : "https://github.com/kazu-yamamoto/dns/issues/82" TITLE : improve windows support BODY : this is currently blocked by 80 for which i have fired a pr here https://github.com/kazu-yamamoto/dns/pull/81 . after 80 will be hopefully merged into master , we have now the possibility of supporting multiple nameservers. on nix, we are exploiting this by reading all the nameserver entries of /etc/resolv.conf , but on windows, we are not. as you can see here https://github.com/kazu-yamamoto/dns/blob/master/cbits/defaultdns.c l38-l41 , we are calling getnetworkparams https://msdn.microsoft.com/en-us/library/windows/desktop/aa365968 v=vs.85 .aspx which has the following structure: cpp dword getnetworkparams _out_ pfixed_info pfixedinfo, _in_ pulong poutbuflen ; this returns a pointer to a fixed_info https://msdn.microsoft.com/en-us/library/windows/desktop/aa365900 v=vs.85 .aspx structure, defined like so: cpp typedef struct { char hostname max_hostname_len + 4 ; char domainname max_domain_name_len + 4 ; pip_addr_string currentdnsserver; ip_addr_string dnsserverlist; uint nodetype; char scopeid max_scope_id_len + 4 ; uint enablerouting; uint enableproxy; uint enabledns; } fixed_info, pfixed_info; in particular, dnsserverlist is ... a linked list of ip_addr_string structures that specify the set of dns servers used by the local computer. .. . unfortunately, in the current implementation, we are getting only the first one and throwing away the rest. furthermore, the current defaultdns.c is doing error handling with printf https://github.com/kazu-yamamoto/dns/blob/master/cbits/defaultdns.c l33 , which is less than ideal. in a nutshell, this ticket is about: polishing the c code; read the entire linked list into the haskell world.