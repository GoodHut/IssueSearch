 URL : "https://github.com/yarpc/yarpc-go/issues/811" TITLE : config: support ${foo:bar} BODY : our configuration system needs to support environment variables with defaults. ${foo:bar} says that use the value of that environment variable here, and if the environment variable is unset, use bar . one way to do this is to add support for it in the internal/decode package. the underlying library mapstructure allows registering hooks for type conversion. these hooks have access to the type you are converting from and to as well as the value you're converting. this is actually how the decoder.decoder interface support is implemented. so someone would have to write a hook that checks if the type you're converting from is a string, and the value is in the format specified above. then, replace its contents and let the usual type conversion logic do the rest. i'm not sure about this but you may have to implement the weaklytypedinputs option in mapstructure to allow converting strings to ints.