 URL : "https://github.com/cloudfoundry-community/bosh_exporter/issues/14" TITLE : file descriptor leak BODY : hi bosh_exporter devs, we're seeing the bosh_exporter process fail due to leaking file descriptors. for example here is the output of lsof -c bosh_exporter ... bosh_expo 16454 root 6u sock 0,8 0t0 1620523 can't identify protocol bosh_expo 16454 root 7u sock 0,8 0t0 1620524 can't identify protocol bosh_expo 16454 root 8u sock 0,8 0t0 1620527 can't identify protocol bosh_expo 16454 root 9u sock 0,8 0t0 1620633 can't identify protocol bosh_expo 16454 root 10u sock 0,8 0t0 1620756 can't identify protocol bosh_expo 16454 root 11u sock 0,8 0t0 1620864 can't identify protocol bosh_expo 16454 root 12u sock 0,8 0t0 1620972 can't identify protocol bosh_expo 16454 root 13u sock 0,8 0t0 1621079 can't identify protocol bosh_expo 16454 root 14u sock 0,8 0t0 1621188 can't identify protocol bosh_expo 16454 root 15u sock 0,8 0t0 1621386 can't identify protocol bosh_expo 16454 root 16u sock 0,8 0t0 1621497 can't identify protocol ... https://stackoverflow.com/a/13789866 suggests this might be due to half-open tcp/ip connections which i'm guessing may be being leaked by the bosh-cli client. our stop-gap solution is to restart the monit process whenever it fails. we're running prometheus bosh-release v19.0.1 on aws using the ubuntu-trusty stemcell 3445.16 cheers, pete