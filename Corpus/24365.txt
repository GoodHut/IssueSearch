 URL : "https://github.com/riscv/riscv-go/issues/16" TITLE : split stack checks BODY : some risc-v implementations will be more dependent on static branch prediction. we can be friendlier to them by moving the morestack call to the end of the function, so that the initial ld; bgeu is a not-taken forward branch. look at what cmd/internal/obj/x86.stacksplit is doing, there are subtleties with pcdata and stack adjustment that need to be handled to keep gc happy just copying the original x86 commit is not enough .