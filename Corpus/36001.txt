 URL : "https://github.com/hwillson/meteor-stub-collections/issues/23" TITLE : flaky tests on 1.0.6 BODY : my tests have gotten extremely flaky since going to 1.0.6 the version wasn't locked, so i'm not sure what version i was running before, but it was about 2 weeks ago they were last being run . before, collection hooks weren't being called at all, and now suddenly they are being called. but since i typically don't want these hooks to be called when running unit tests well, except if i'm testing the hook itself , i changed all my insert/update/remove calls to be on the .direct collection. and while the changelog says these should also be stubbed, the behavior seems to be very flaky. it seems to run correct on the first run, but on a rebuild e.g. when changing a test things seem to go wrong every so often and in random ways. errors coming from npm-mongo on collections that should have been stubbed, like: â€£ error: e11000 duplicate key error collection: meteor.meetings index: _id_ dup key: { : aaa }writeerror { code :11000, index :0, errmsg : e11000 duplicate key error collection: meteor.meetings index: _id_ dup key: { : \ aaa\ } , op :{ _id : aaa , state :2, enddate : 2017-11-28t17:52:37.668z }} at function.mongoerror.create and find -s that seems to not find results that have clearly been inserted.