 URL : "https://github.com/publiclab/plots2/issues/1484" TITLE : main search broken BODY : what happened just before the problem occurred i wanted to look for info on gsoc projects. typed gsoc on search bar. did not click on any of the typeahead items offered. instead, submitted form. reached 500 error page. relevant urls https://publiclab.org/search/gsoc logs attached this is from production: started get /search/soc for 179.7.36.111 at 2017-06-28 08:41:25 +0000 processing by searchescontroller results as html parameters: { id => soc } read fragment views/related_sidebar-feature 0.2ms rendered sidebar/_notes.html.erb 74.2ms rendered sidebar/_related.html.erb 196.5ms started get /api/typeahead/all?srchstring=soc for 179.7.36.111 at 2017-06-28 08:41:26 +0000 rendered notes/_notes.html.erb 682.1ms rendered searches/results.html.erb within layouts/application 879.2ms completed 500 internal server error in 915.1ms actionview::template::error undefined method total_pages' for <activerecord::relation:0x007f4a54275100> : 67: <% end %> 68: </div> 69: </div> 70: <%= will_paginate notes, :renderer => bootstrappagination::rails unless @unpaginated %> app/views/notes/_notes.html.erb:70:in _app_views_notes__notes_html_erb___1165277546433096998_69698800' app/views/searches/results.html.erb:15:in _app_views_searches_results_html_erb__84653701910073881_65151680'