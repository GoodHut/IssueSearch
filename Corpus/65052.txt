 URL : "https://github.com/moq/moq4/issues/446" TITLE : imemorycache mock error BODY : when trying to perform a setup to call set on an instance of memorycache, i receive the following error: system.notsupportedexception : invalid setup on an extension method: m => m.set<string> it.isany<string> , it.isany<string> , it.isany<memorycacheentryoptions> at moq.mock.throwifsetupexpressioninvolvesunsupportedmember expression setup, methodinfo method in c:\projects\moq4\source\mock.cs:line 812 at moq.mock.<>c__displayclass61_0 2.<setup>b__0 in c:\projects\moq4\source\mock.cs:line 465 here's the test in question: fact public void searchproducts { //arrange var memorycachemock = new mock<imemorycache> ; memorycachemock.setup m => m.set it.isany<string> , it.isany<string> , //some other test code }