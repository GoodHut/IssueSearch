 URL : "https://github.com/drolbr/Overpass-API/issues/392" TITLE : parallel clone generation BODY : i want to propose an option to have parallel processing for clone db generation. rationale: cut down clone generation from 6+ hours to 2 hours possibly much faster on ssd spread cpu load for compression/decompression across several cores better support for users wanting to turn zlib db into lz4 db https://github.com/drolbr/overpass-api/pull/334 code: https://github.com/mmd-osm/overpass-api/blob/3ae1a3ed614afb04545ab841cb9770e74c1923bb/src/overpass_api/osm-backend/clone_database.cc -> needs parameter to control of parallel processes. at this time, it's hardcoded to 4. measurements on dev instance: source=zlib clone files, no concurrent updates target compression lz4: --------------------------------------------------------- 2017-04-28 08:26:42 1186 read_idx_finished 1420. 2017-04-28 08:26:42 1420 read_idx_finished end 2017-04-28 08:26:42 1420 -- clone database -- 2017-04-28 10:21:00 1420 read_finished start 1044680 2017-04-28 10:21:00 1186 read_finished of process 1420. 2017-04-28 10:21:00 1420 read_finished end target compression zlib: --------------------------------------------------------- 2017-04-28 11:14:40 1186 read_idx_finished 10503. 2017-04-28 11:14:40 10503 read_idx_finished end 2017-04-28 11:14:40 10503 -- clone database -- 2017-04-28 13:21:39 10503 read_finished start 1044686 2017-04-28 13:21:39 1186 read_finished of process 10503. 2017-04-28 13:21:39 10503 read_finished end