 URL : "https://github.com/H-uru/dirtsand/issues/110" TITLE : npc clone unloading crash BODY : commit 450107d introduced a segmentation fault on gcc 5.4.0. if there are any npc clones loaded by a game host, the segmentation fault occurs when unreffing and deleting the stored clone message. to reproduce this issue, link to sphere 1 of ahnonay with loaded quabs, then link to relto. ds will crash on link out. segfault at bin/dirtsand 0x52a284 /home/adamj/dev/dirtsand/dsmain.cpp:89 from bin/dirtsand 0x52a3ac /home/adamj/dev/dirtsand/dsmain.cpp:108 discriminator 16 from /lib/x86_64-linux-gnu/libc.so.6 +0x354b0 0x7f46ec4244b0 from bin/dirtsand _zn4moul9creatable10safe_unrefeps0_+0x49 0x515828 /home/adamj/dev/dirtsand/plasmoul/creatable.h:44 discriminator 1 from bin/dirtsand _zn4moul9creatable5unrefev+0x18 0x515882 /home/adamj/dev/dirtsand/plasmoul/creatable.h:57 from bin/dirtsand _z16dm_game_shutdownp16gamehost_private+0x101 0x50ee40 /home/adamj/dev/dirtsand/gameserv/gamehost.cpp:74 discriminator 2 from bin/dirtsand _z11dm_gamehostp16gamehost_private+0x5e 0x51418c /home/adamj/dev/dirtsand/gameserv/gamehost.cpp:810 from bin/dirtsand _znst12_bind_simpleifpfvp16gamehost_privatees1_ee9_m_invokeijlm0eeeevst12_index_tupleijxspt_eee+0x40 0x523708 /usr/include/c++/5/functional:1532 from bin/dirtsand _znst12_bind_simpleifpfvp16gamehost_privatees1_eeclev+0x2c 0x523612 /usr/include/c++/5/functional:1520 from bin/dirtsand _znst6thread5_implist12_bind_simpleifpfvp16gamehost_privatees3_eee6_m_runev+0x1c 0x5235a2 /usr/include/c++/5/thread:115 from /usr/lib/x86_64-linux-gnu/libstdc++.so.6 +0xb8c80 0x7f46ecca3c80 from /lib/x86_64-linux-gnu/libpthread.so.0 +0x76ba 0x7f46ec7bf6ba from /lib/x86_64-linux-gnu/libc.so.6 clone+0x6d 0x7f46ec4f582d segmentation fault