 URL : "https://github.com/luigirizzo/netmap/issues/404" TITLE : ixgbe external tail issue BODY : my nic looks like this: 0.365 backend_init backend_netmap.c:141 tx ring 0 has 512 slots 1026-1537 backend_init backend_netmap.c:141 tx ring 1 has 512 slots 1538-2049 backend_init backend_netmap.c:148 rx ring 0 has 512 slots 2-513 backend_init backend_netmap.c:148 rx ring 1 has 512 slots 514-1025 when placing a packet into ring 0, slot 0 and doing a tx, this is what happens: eth_tx eth.c:138 placing iov idx 2050 into tx ring 0 slot 0 swap with 1026 eth_tx eth.c:154 eth 90:e2:ba:39:39:51 -> 90:e2:ba:18:9b:3d, type 2048, len 98 w_nic_tx backend_netmap.c:370 tx ring 0: old tail 511, tail 0, cur 1, head 1 w_nic_tx backend_netmap.c:383 move idx 2050 from ring 0 slot 0 to w_iov swap w/1026 w_nic_tx backend_netmap.c:370 tx ring 1: old tail 511, tail 127, cur 0, head 0 ring 0 is fine, but the tail on ring 1 jumps by 127. the same code runs fine on igb and i40e interfaces, so i suspect an ixgbe issue? for comparison, here is what happens on an i40e nic: eth_tx eth.c:138 placing iov idx 10242 into tx ring 0 slot 0 swap with 5122 eth_tx eth.c:154 eth 68:5:ca:32:b:98 -> 68:5:ca:32:15:d0, type 2048, len 98 w_nic_tx backend_netmap.c:370 tx ring 0: old tail 511, tail 0, cur 1, head 1 w_nic_tx backend_netmap.c:383 move idx 10242 from ring 0 slot 0 to w_iov swap w/5122 w_nic_tx backend_netmap.c:370 tx ring 1: old tail 511, tail 511, cur 0, head 0 here, ring 1 doesn't change when ring 0 is used for tx.