 URL : "https://github.com/w3core/RockJS/issues/1" TITLE : sync xhr request timeout BODY : hi here, rockjs is a great framework, we use it in our projects. however, we encountered an issue when tried to send synchronous xhr request. i know sync xhr requests are deprecated, but we need it in one tricky point of internal project as temporary fix. it fails with exception timeouts cannot be set for synchronous requests made from a document. . the reason is simple: timeout is not allowed in sync requests. so we fixed it in core/js/generic/includers.js by changing: xhr.timeout = q.timeout; to: if q.async { xhr.timeout = q.timeout; } patch: core/js/generic/includers.js | 2 +- 1 file changed, 1 insertion + , 1 deletion - diff --git a/core/js/generic/includers.js b/core/js/generic/includers.js index 292afd7..c5c4951 100644 --- a/core/js/generic/includers.js +++ b/core/js/generic/includers.js @@ -220,7 +220,7 @@ } try{xhr.open q.type, url, q.async ;} catch e {onerror e, execcallbacks ;}; - xhr.timeout = q.timeout; + if q.async { xhr.timeout = q.timeout; } if q.contenttype != null xhr.setrequestheader 'content-type', q.contenttype ; if q.xrequestedwith != null xhr.setrequestheader 'x-requested-with', q.xrequestedwith ; for var i in q.headers xhr.setrequestheader string i , string q.headers i ;