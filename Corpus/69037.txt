 URL : "https://github.com/edzer/sfr/issues/392" TITLE : st_write, gpkg and esri BODY : i hesitate to call this a bug since it only causes problems in arcmap, however i'm trying to wean my colleagues off using shapefiles and this has been a hurdle: library sf linking to geos 3.5.0, gdal 2.1.1, proj.4 4.9.3 > nc = st_read system.file shape/nc.shp , package= sf > setwd 'c:/data/stwrite' > st_write nc, file.path getwd , 'nc.gpkg' , quiet = true > st_write nc, dsn = file.path getwd , 'nc2.gpkg' , layer = 'nc', quiet = true > st_write nc, dsn = file.path getwd , 'nc3.gpkg' , layer = 'nc.gpkg', quiet = true of the three st_write calls above, only the second can be opened in arcmap 10.4.1, i think because of the file extension getting repeated in the layer name. here's what they look like in arccatalogue: ! screencap https://github.com/obrl-soil/bits-n-pieces/blob/master/images/arc_catalogview.png?raw=true the other two throw some fairly cryptic errors. would it be a bad idea to change the default for layer to something like ifelse driver %in% db_drivers, tools::file_path_sans_ext basename dsn , basename dsn ?