 URL : "https://github.com/archimg/archlinux/issues/18" TITLE : can't use pacman BODY : i thougt i would use a docker image to test my pkgbuild, but i can't get this package to work with pacman. my dockerfile lookslike this: from base/devel run pacman-db-upgrade && pacman -syu --noconfirm jdk8-openjdk when i run docker build . -t test , i get this error, but the image builds. <lots of output from pacma omitted...> installing jdk8-openjdk... upgrading libpsl... error: could not remove database entry libpsl-0.17.0-2 ldconfig: cannot lstat /usr/lib/libexpat.so.1.6.4: no such file or directory ldconfig: cannot lstat /usr/lib/libpsl.so.5.1.1: no such file or directory ldconfig: cannot lstat /usr/lib/libdbus-1.so.3.14.11: no such file or directory the problem is that i can't run any pacman commands after this. for example docker run -ti test pacman -syu , which fails with :: synchronizing package databases... core is up to date extra is up to date community is up to date :: starting full system upgrade... error: duplicated database entry 'libpsl' error: could not open file /var/lib/pacman/local/libpsl-0.17.0-2/desc: no such file or directory resolving dependencies... looking for conflicting packages... warning: could not fully load metadata for package libpsl-0.17.0-2 error: failed to prepare transaction invalid or corrupted package am i using pacman wrong?