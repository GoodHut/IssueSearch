 URL : "https://github.com/Microsoft/VSProjectSystem/issues/244" TITLE : making nuget work BODY : hi, i've been trying to create a project system, but i can't get nuget to work. the project system and sample project are in my repo https://github.com/adfcommunity/adfc.visualstudio.extensions . i created a nuget package with the build tools, and if i run msbuild /t:restore,build , it builds the project. if i add the nuget as a reference to a csproj with a packages.config, the csproj includes my nuget's props and targets files. so i believe i created the nuget correctly. however, even though i have added the packagereference project capability, when i use the nuget package manager in visual studio to add a reference to my project, it adds a packages.config, instead of a packagereference. even thought it created a packages.config, it didn't modify the csproj to include my props or targets file. therefore, using visual studio, i can't get the project to actually build. i must manually call msbuild from the command prompt. possibly for the same root cause, the file globs in my nuget package's targets file is not causing the files to appear under my project in solution explorer. i have seen this doco on how to add support for nuget packages https://docs.microsoft.com/en-us/nuget/visual-studio-extensibility/project-system-support , so i added the 3 project capabilities it tells me to. it made the manage nuget packages menu item appear when i right click my project, but as i described above, visual studio will not restore the package create the .nuget.g. props,targets files in obj\ , nor add imports to the package's targets and proprs in the project file. how can i get nuget to work in a custom not .net project system?