 URL : "https://github.com/tov/libffi-sys-rs/issues/8" TITLE : lib/ vs lib64/ BODY : just tried compiling this crate on a 64-bit nixos system. and i ran into the issue that the compiled native libffi ended up in a lib64/ folder, not in lib/ . so changing line 23 of build.rs from rust let libdir = path::new &prefix .join lib ; to rust let libdir = path::new &prefix .join lib64 ; made it compile for me. i assume a more robust solution would be to just add both variants to the search path for rustc? for reference, this is the nix expression i used to setup the environment: nix with import <nixpkgs> {}; stdenv.mkderivation { name = libffi-rs-sys ; src = ./.; libclang_path = ${llvmpackages.clang.cc}/lib ; buildinputs = automake file gnum4 libtool clang texinfo autoconf rustc cargo ; }