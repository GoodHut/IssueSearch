 URL : "https://github.com/exonum/exonum/issues/269" TITLE : wrong json serialization BODY : this code produces wrong json output: rust macro_use extern crate exonum; extern crate serde; extern crate serde_json; macro_use extern crate serde_derive; encoding_struct! { struct wallet { const size = 8; field balance: u64 00 => 08 } } derive serialize struct rawwallet { balance: u64, } fn main { let wallet1 = wallet::new 0 ; let json1 = &serde_json::to_value &wallet1 .unwrap ; let wallet2 = rawwallet { balance: 0 }; let json2 = &serde_json::to_value &wallet2 .unwrap ; println! json: {} vs {} , json1, json2 ; } it prints: json: { balance : 0 } vs { balance :0} we get a string instead of an integer .