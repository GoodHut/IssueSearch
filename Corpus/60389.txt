 URL : "https://github.com/d3/d3-queue/issues/69" TITLE : .awaitall calling early BODY : i'm defining a queue and adding .defer tasks using a loop followed by an .awaitall, i'm having an issue where the .awaitall is getting called before all of the tasks have been completed and i'm not sure where the issue lies. var findlatlon = function loc, callback { d3.json http://maps.googleapis.com/maps/api/geocode/json?address= + loc + &sensor=true , function err, res { callback res 'results' 0 'geometry' 'location' } } var q = d3.queue ; for var i = 0; i < locationarray.length; i++ { q.defer findlatlon, locationname ; } q.awaitall function err, res { if err throw err; console.log queue done , res ; } ;