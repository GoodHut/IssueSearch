 URL : "https://github.com/capitalone/cloud-custodian/issues/1673" TITLE : ec2s not getting stopped BODY : running a cloud trail policy for stopping ec2s with expired amis, not all of the instances are being stopped. all are being correctly identified and tagged, but not all are stopped. attached are screenshots of one example of this where of 10 instances started, 10 were tagged but then only 9 were stopped. here is a snippet of the policy in question: - name: ec2-ami-ancient-create-stop-event-baldur resource: ec2 description: stop ec2s launched with expired ami mode: type: cloudtrail events: - runinstances filters: - type: image-age days: 60 op: gt - tag:aws:autoscaling:groupname : absent - tag:aws:elasticmapreduce:job-flow-id : absent - tag:aws:elasticmapreduce:instance-group-role : absent - type: value key: tag:custodian_ami_compliance value: exclude op: ne actions: - type: tag key: baldur-above-60 value: amiexpired instance stopped - stop ! screen shot 2017-10-19 at 2 12 15 pm https://user-images.githubusercontent.com/10502907/31786911-0d6d6e82-b4d8-11e7-8103-cbd6cf6fa8aa.png ! screen shot 2017-10-19 at 2 12 59 pm https://user-images.githubusercontent.com/10502907/31786912-0d7c41d2-b4d8-11e7-8fa1-e18a98b94883.png