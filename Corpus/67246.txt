 URL : "https://github.com/Zimmi48/bugzilla-test-2/issues/2614" TITLE : patch ocamlbuild broken BODY : note: the issue was created automatically with bugzilla2github tool original bug id: bz 2614
date: 2011-10-06 04:24:19 +0200
from: @ tomprince
reported version: 8.5
cc: @ ppedrot, @ glondu depends on: 2508, 2509
last updated: 2016-06-27 00:56:27 +0200 @ tomprince on 2011-10-06 04:24:19 +0200 created attachment 287
fix ocamlbuild. > attached file: 0001-ocamlbuild-fix-ocamlbuild-compilation-for-changes-to.patch https://coq.inria.fr/bugfiles/attachment.cgi?id=287 text/plain, 1476 bytes > description: fix ocamlbuild. @ glondu on 2011-10-06 10:04:54 +0200 thanks for checking. i don't think specifying -dllpath this way is useful, though, since the relative path will be resolved against the current working directory, which can be arbitrary. what about dropping -dllpath altogether, and expecting the user to export the appropriate caml_ld_library_path? in the longer term, ocamlrun's handling of -dllpath should be tuned to allow some substitution variables Ã  la ld.so's $origin . @ tomprince on 2011-10-06 16:27:31 +0200 yes, i wasn't certain about what should be passed to -dllpath, the bigger issue was the use of now undefined line1/srcbuild. @ glondu on 2011-10-07 12:04:19 +0200 i've committed your patch, and removed -dllpath, but i keep this bug open because the resulting coqc still doesn't work, at least when -local has been given to ./configure, because executables built in _build don't respect the -local layout coqc in scripts/, coqtop in toplevel/, and therefore, coqc failing to find coqtop . @ tomprince on 2011-10-07 14:54:34 +0200 in that case, make this depend on other bugs in the ocamlbuild system. @ ppedrot on 2016-06-27 00:56:27 +0200 ocamlbuild compilation has been removed in trunk.