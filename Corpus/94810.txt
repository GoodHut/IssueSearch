 URL : "https://github.com/chef-partners/knife-vsphere/issues/368" TITLE : cloning a windows vm fails BODY : versions: <!--- version of the software where you are encountering the issue ---> <!-- you should probably update in this is not newest release.---> version of knife-vsphere: 1.2.26 version of chef: 12.17.44 platform details <!--- what version of vsphere are you running? what version of esxi are you using too?---> version of vsphere: 6.5.0 build 4602587 version of esxi: scenario: <!--- what you are trying to achieve and you can't?---> trying to clone a windows vm from template, using customization specification. plugin tries to invoke a method on a nil object and cloning fails. please paste the command and output run with -vv . don't forget to x out any passwords or sensitive information: <!--- if you are filing an issue what are the things we need to do in order to repro your problem? how are you using this gem or any resources it includes?---> $ knife vsphere vm clone --vsdc --vshost --vsinsecure true --vsuser --vspass --datastore --resource-pool --dest-folder --folder --template --cspec knife-vsphere-plugin --ccpu 1 --cram 1 --cdomain --cgw --cdnsips --cdnssuffix --chostname --cvlan --cips --cmacs auto --sw-uuid auto --bootstrap --environment --bootstrap-version --run-list --node-name --ssh-user --ssh-password expected result: <!--- what are you expecting to happen as the consequence of above reproduction steps?---> vm cloned actual result: <!--- what actually happens after the reproduction steps? include the error output or a link to a gist if possible.---> error: knife encountered an unexpected error this may be a bug in the 'vsphere vm clone' knife command or plugin please collect the output of this command with the -vv option before filing a bug report. exception: nomethoderror: undefined method automode' for nil:nilclass