 URL : "https://github.com/mozilla/fathom/issues/65" TITLE : add a compilation pass BODY : add a compilation pass for rulesets. this will bring several improvements: catch errors early: for example, dom rules that don't assign a type. compute rule prereqs only once. support and rules with more complex operands. compiling down to simpler rules is much easier than coding it all into andlhs. i see us inserting a compiledruleset class chronologically between ruleset and boundruleset. callers can compile a ruleset manually if they wish, or they can just call ruleset.against as now, and the compile will happen implicitly and then get thrown away .