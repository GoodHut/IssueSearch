 URL : "https://github.com/woocommerce/woocommerce/issues/13456" TITLE : order item totals filter BODY : f5a36778fd4f8c682aa5e77ce8c737648f8a065c overrides get_order_item_totals in wc_order . this part: php $total_row = array_pop $total_rows ; leads to a problem when the filter woocommerce_get_order_item_totals which is applied twice, first in abstract wc_order by calling parent::woocommerce_get_order_item_totals then in wc_order has been used to add an additional item to the end of the list. e.g. i'm adding tax amounts per rate separately to the end of the total item list. in this case, data of the last item in the list is used as order total amount item. i think it would be better to explicitly grab the order_total key, e.g.: php $total_rows = parent::get_order_item_totals $tax_display ; $total_row = isset $totals_rows 'order_total' ? $totals_rows 'order_total' : array_pop $total_rows ;