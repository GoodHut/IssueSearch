 URL : "https://github.com/rpav/cl-autowrap/issues/86" TITLE : libffi on windows BODY : hello, while linking against an library using libffi for structure support, i receive the following error error creating cif for foo::bar: :bad-abi i traced this down to ffitarget.h and ffiw64.c in libffi and found the issue to be an incorrect value for autowrap.libffi:+ffi-default-abi+ . this is an enum and the libffi spec files specify its value incorrectly as 2. the issue is that the generated spec files do not properly define the flags used by libffi when building on windows x64. see ffitarget.h:80 https://github.com/libffi/libffi/blob/93d8e7dd17b08ff195af3580584ccd5c2228202f/src/x86/ffitarget.h l80 for the definition of these enum values on the various platforms. on windows x64 this value should be 1 , instead. some other enum values should not be present, as well. i suspect this issue affects other platforms, as well. thanks!