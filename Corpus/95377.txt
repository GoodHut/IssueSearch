 URL : "https://github.com/kokkos/kokkos/issues/637" TITLE : cuda scratch space cleanup BODY : in support of issues 477 and 577 cuda back-end use of scratch and shared memory has become a patchwork that must be cleaned up. in addition, to allow multiple teams to occupy a single thread block the thread block's shared memory must be partitioned among teams. the advent of cuda shuffle capability since kokkos' original design should also be considered. considerations for the use of cuda shared memory: - global reduce and scan inter-thread and inter-block scratch memory - global reduce with static or dynamic reduction values - team reduce and scan inter-thread scratch memory - team shared scratch memory - team thread private dynamically sized scratch memory - non-failing fall-back to scratch global memory when requested shared scratch memory exceeds capacity of cuda '__shared__' memory - use of shared memory within separately compiled, relocatable cuda functions such as tasks