 URL : "https://github.com/cloudius-systems/osv/issues/883" TITLE : support tcp_cork option BODY : the tcp_cork socket option is important for a server to avoid a bad interaction of its own tcp's nagle's algorithm and the client tcp's delayed ack : consider an http server sending 200 bytes of headers and then 500 bytes of body. without tcp_cork, it sends the headers immediately in a small packet. the client does not yet send an ack - it will only send the ack 100ms later this is delayed ack . in the mean time the server has 500 bytes more to send, but nagle's algorithm means it will not send this incomplete packet because it hasn't received an ack yet - it will keep hoping to send more which it won't . only after 100ms it will receive the ack, and finally send those 500 bytes. it appears osv neglected to implement tcp_cork. the freebsd stack has the same option with the name tcp_nopush, but it's a different value. hopefully a simple translation somewhere bsd/sys/compat/linux/linux_socket.cc's linux_to_bsd_tcp_sockopt ? where is the reverse one? would do.