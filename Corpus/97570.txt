 URL : "https://github.com/Automattic/mongoose/issues/4888" TITLE : help on virtual on the fly BODY : hi, we have a pretty large application which has tons of kinda rest api which returns data mostly based on mongoose models. in lots of them, we are adding custom aggregate, flags... obviously, it would be insane and difficult to maintain to have them it the schema description file. so, we add these data by leaning the mongoose result or playing with .toobject i'm trying to have a cleaner way to handle that process, to keep the mongoose model up to the real http response send. here is a plugin i'm trying to write to handle that: var mongoose = require 'mongoose' ; mongoose.plugin addvirtual ; / add a virtual on the fly @param schema @constructor / function addvirtual schema { var added = {}; schema.methods.addvirtual = function name, value { if !added name { added name = true; schema.virtual 'name' ; } this name = value; }; } var catschema = new mongoose.schema {name: string}, {toobject: {virtuals: true}, tojson: {virtuals: true}} ; catschema.virtual 'classic' ; var cat = mongoose.model 'cat', catschema ; var kitty = new cat { name: 'zildjian' } ; kitty.addvirtual 'onthefly', 123 ; console.log kitty.onthefly ; // => 123 console.log kitty.tojson ; // => classic is in the result, but not the onthefly it seems to not be possible to add virtual after the model instanciation, do you see any way i could use to bypass this i'm going to dig into the model / document class . thanks in advance for your time on this non-issue