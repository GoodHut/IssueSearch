 URL : "https://github.com/PrismJS/prism/issues/1137" TITLE : custom class plugin broken BODY : i have my own style class annotation , which makes a little note icon appear in the text. as i explained elsewhere https://github.com/prismjs/prism/issues/1055 issuecomment-301209192 , this makes my <pre class= line-numbers ><code class= language-java > sections have little note icons all over the place, because prism hijacks the common name annotation for its own purposes not bothering to prefix its style names to even attempt to avoid clashes . i had hoped the custom class plugin http://prismjs.com/plugins/custom-class/ would provide a workaround. i downloaded minified prism with the coy theme, all languages, and the following plugins: line numbers custom class keep markup command line then i edited prism.js and added the following line at the end, as per the custom class plugin documentation: javascript prism.plugins.customclass.prefix 'prism-' ; on my first code block, the little note icons disappeared. the coy theme remained, but there was no java syntax highlighting. my second code block had no formatting at all --- not even the coy theme. the chrome console says: prism.js:126 uncaught typeerror: cannot read property 'token' of undefined at file:///…/prism.js:126:340 at array.map native at file:///…/prism.js:126:286 at object.run file:///…/prism.js:2:4595 at function.a.stringify file:///…/prism.js:2:5163 at file:///…/prism.js:2:4843 at array.map native at function.a.stringify file:///…/prism.js:2:4818 at object.highlight file:///…/prism.js:2:3168 at object.highlightelement file:///…/prism.js:2:2930