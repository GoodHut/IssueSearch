 URL : "https://github.com/theCrag/website/issues/2582" TITLE : profile page stats query. BODY : @brendanheywood i have started experimenting with a single profile page stats query which can give us performance rating over time. i have a current version in sql/account-power-rating-10-profile2.sql . it has highlighted a couple of secondary things: - the way ref offset works means we should not include ascents before 1970-01-01. - partial dates needs way more processing. the default sql functions we are using to convert partial dates for decay, don't work as we want them to. if there is no month then we have to convert to jan, and if there is no day then we have to convert to the 1st of the month. the query uses internal variables to track cumulative power and cumulative decay power. a sub query orders by ascent date. the cumulative decay power is calculated for the date of the current ascent. so the first ascent in the list has a cumulative power equal to the total power. then the second ascent decays the previous ascents power to the second ascent date. and so on. this means the that at any ascent date we know the persons decay power. - note to self: do we want total power. how does total power work when there is no ascent dates. do we use log date? so we can do it all in one query i am also doing onsight in the same query. - note to self: onsight should not be tick shifted. the query returns a list of ascents for a particular gear style, ordered by ascent date and includes the following info: tick type ascent date cumulative decay power decayed to the ascent date cumulative onsight decay power decayed to the ascent date does this seem like the right track for the profile page?