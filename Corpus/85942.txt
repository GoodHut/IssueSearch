 URL : "https://github.com/SinclairQL/dithVide/issues/1" TITLE : general code improvements BODY : the code currently assumes that the ql main screen is located at $20000 and the second screen at $28000, with a single line of the screen occupying 128 bytes this is correct for qdos, but the code really should look up the screen locations from the rom - see the code i wrote for screen in https://github.com/sinclairql/stoql-screen-convertor/blob/master/sources/fn.asm although you do need to pass a channel parameter to get this information . the other improvement would be to change the scr_loop process. you can actually use the movem.l instruction to move several long words much more quickly than move.l a0 +, a1 + 6 times.... the dbf loop is the slowest bit of this process . even better would be: swap_scr move.l $ff,d0 ;256-1 screen lines -1 for dbcc lea sv_base,a1 lea vram2,a0 scr_loop movem.l a0 ,d1-d6 movem.l a1 ,d7/a2-a6 movem.l d7/a2-a6, a0 + movem.l d1-d6, a1 + movem.l a0 ,d1-d6 movem.l a1 ,d7/a2-a6 movem.l d7/a2-a6, a0 + movem.l d1-d6, a1 + movem.l a0 ,d1-d6 movem.l a1 ,d7/a2-a6 movem.l d7/a2-a6, a0 + movem.l d1-d6, a1 + movem.l a0 ,d1-d6 movem.l a1 ,d7/a2-a6 movem.l d7/a2-a6, a0 + movem.l d1-d6, a1 + movem.l a0 ,d1-d6 movem.l a1 ,d7/a2-a6 movem.l d7/a2-a6, a0 + movem.l d1-d6, a1 + movem.l a0 ,d1-d2 movem.l a1 ,a2-a3 movem.l a2-a3, a0 + movem.l d1-d2, a1 + ; fast swap 1 line of the screen 128 bytes = 32 long words dbf d0,scr_loop ;loop until -1 false rts could also check the actual width of the screen at this location and if it is more than 128 bytes, add the difference to a1 and a0 at the end of each screen line - although this is probably not required.