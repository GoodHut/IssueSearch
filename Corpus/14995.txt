 URL : "https://github.com/eribul/classifyr/issues/24" TITLE : codify vs codify2 BODY : har skrivit om codify men sparat originalet som codify2, nya versionen har enklare kod och bygger på data.table. resultaten blir inte exakt lika. skiljer sig på ss att gamla vertsionen exkluderade koder utanför angiven period om det samtidigt fasnns koder för samma patient inom perioden. vet dock inte om detta steg är nödvändigt, vi kan visserligen reducera dataramens storlek men det blir ett extra beräkningssteg och vi kan inte radera rader via referens, vilket innebär kopia. just nu modifierar codify dataramen via referens men jag bör nog ta en kopia via copy i början av funktionen för att undvika detta beteende. eller ev införa ett argument som kan styra detta. ibland kanske vi kan leva med sidoeffekten om det samtidigt ninebär att vi kan hantera riktigt stora datamängder. kanske använda samma argument till att styra ev indexering av dataramen. fördel att det går snabbare men nackdel att sorteringsordningen ändras. t ex kalla argumenet fast för en trade-off mellan snabbhet och minneseffektivitet. kod för att jämföra de båda versionerna som just nu alltså inte är identical . observera också att codify och codify 2 alltså måste anropas i denna ordning till följd av ändringen by referens.: {r} y <- as.data.table codify2 classifyr::ex_people, classifyr::ex_icd10, id = name , date = surgery , days = c -365, 0 order name x <- codify classifyr::ex_people, classifyr::ex_icd10, id = name , date = surgery , days = c -365, 0 head y head x identical x, y