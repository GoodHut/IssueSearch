 URL : "https://github.com/judaco/iPhone/issues/11" TITLE : iphone - class 15 BODY : // // viewcontroller.m // playing video // // created by hackeru on 07/06/2017. // copyright Â© 2017 juda. all rights reserved. // import viewcontroller.h import <avfoundation/avfoundation.h> import <mediaplayer/mediaplayer.h> import <avkit/avkit.h> @interface viewcontroller @end @implementation viewcontroller { avplayerviewcontroller movieplayer; bool isplaying; __weak iboutlet uibutton btnplay; } - ibaction handleplay: id sender { if isplaying { self removevideo ; }else{ movieplayer = avplayerviewcontroller alloc init ; btnplay settitle:@ stop forstate:uicontrolstatenormal ; nsurl url = nsbundle mainbundle urlforresource:@ myvideo withextension:@ mov ; movieplayer.view.frame = cgrectmake self.view.frame.size.width - 300 / 2, 100, 300, 300 ; self.view addsubview:movieplayer.view ; movieplayer.player = avplayer playerwithurl:url ; movieplayer.player play ; isplaying = yes; nsnotificationcenter defaultcenter addobserver:self selector:nsselectorfromstring @ videohasfinishedplaying: name:avplayeritemdidplaytoendtimenotification object:nil ; } } - void videohasfinishedplaying: nsnotification notification{ self removevideo ; } - void removevideo{ if movieplayer != nil { movieplayer.player pause ; movieplayer.view removefromsuperview ; movieplayer = nil; isplaying = no; btnplay settitle:@ play forstate:uicontrolstatenormal ; nsnotificationcenter defaultcenter removeobserver:self ;//like broadcast in android - getting updated from my main system windows, apple } } - void viewdidload { super viewdidload ; isplaying = no; } - void didreceivememorywarning { super didreceivememorywarning ; // dispose of any resources that can be recreated. } @end