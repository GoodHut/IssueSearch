 URL : "https://github.com/sinonjs/sinon/issues/1368" TITLE : support for resolvesthis BODY : sinon version : 2.1.0 environment : node 7.7.4 what did you expect to happen? stubs have returnsthis and resolves functionality but it is not possible to use either to return the stub's context as a _promise_. it would be nice to have a resolvesthis function in stubs. for example, mongoose's model save method returns the saved model object on success. given the following function: javascript function save userinfo { const user = new user { ...userinfo } ; return user.save .catch err => console.log err ; } it would be nice to test that the saved user object actually contains all the info in userinfo via: javascript const stub = sinon.stub user, save ; stub.resolvesthis ; const saveduser = await save mockuserinfo ; assert saveduser.id === mockuserinfo.id ;