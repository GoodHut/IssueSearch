 URL : "https://github.com/c2corg/v6_api/issues/639" TITLE : automatic route detection BODY : this issue describes an algorithm for detecting a route given a gps track. it is tuned to the definition of a route in the c2c data base. a route is described by a set of waypoints access, hut, summit, pass, lake... . a user following a route goes from one waypoint to the other. the algorithm try to detect the most probable route, given the set of associated waypoints and the gps track. the algorithm is split in 2 steps: - pre-processing: get the list of waypoints and routes in the area bbox defined by the gps track. the operations are described in algorithm 1. - likelihood computation: for each potential route, the algorithm compute a likelihood score which is then used to sort routes and propose the most probable ones to the user. the operations are described in algorithm 2. note: a special care should be given to route which are associated with several access points. this happens regularly. for instance, a summit could be reached from 2 parkings but with a large part of the way being common. as a result, only one route is created in the db but the 2 parkings are associated to the route. in this case, the route should be duplicated in order to have as many routes as access points. each duplicated route contains the access point and all the other non access point waypoints. ! algorithm 1 https://cloud.githubusercontent.com/assets/19892089/23206098/aa3b04e8-f8ec-11e6-935b-86c064fa0114.jpg ! algorithm 2 https://cloud.githubusercontent.com/assets/19892089/23206102/b11bd1b6-f8ec-11e6-893f-2b3d8593d924.jpg