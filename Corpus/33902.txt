 URL : "https://github.com/SrSteck/BKP-Scripts-/issues/1" TITLE : banner conection ssh BODY : arqusers= users.txt sleeptime=40 echo $$ > pidsshkill.txt if ! -f $arqusers then echo $arqusers inexistente! exit 0 fi while true do while read userline do user= $ echo $userline | cut -d' ' -f1 maxsessions= $ echo $userline | cut -d' ' -f2 ps x | grep $user | grep -v grep | grep -v pts > tmp.tmp qtdsessions= $ cat tmp.tmp | wc -l echo user: $user - $qtdsessions/$maxsessions if qtdsessions > maxsessions then echo 'killing...' while read line do tmp= $ echo $line | cut -d' ' -f1 echo killing $tmp kill $tmp done < tmp.tmp rm tmp.tmp fi done < $arqusers echo sleeping $sleeptime... sleep $sleeptime done