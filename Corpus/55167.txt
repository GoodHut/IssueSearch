 URL : "https://github.com/Kademi/kademi-dev/issues/4605" TITLE : improve email queueing BODY : the current situation is that it takes 100ms to generate a mimemessage and about 30secs to send it, although usually messages are sent in around 5secs. this means we need a much larger thread pool for deliverying threads then generating them. update as follows - emailitemqueuestore should have a thread pool which generates mimemessages and pushes them into a bounded queue eg max size 500 - emailitemqueuestore.next returns the next item from the list of generated messages - this thread pool size should be configurable., as should the max size - generating a mimemessage should not create a emailsendattempt - increase the thread pool size for delivery threads, to about 120 - sendmessage will call emailitemmailstore to get a mimemessage by id, this will return the pre-generated mimemessage and create a emailsendattempt and remove it from the queue this way i think we can have about 10 threads generating mimemessages and about 100 delivery threads sending them