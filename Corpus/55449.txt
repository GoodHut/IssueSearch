 URL : "https://github.com/JuliaGPU/CUDAnative.jl/issues/133" TITLE : ipo safety base passes BODY : when fixing up the kernel calling convention replacing references with values , we inline the original entry-point function in an llvm wrapper: https://github.com/juliagpu/cudanative.jl/blob/ce3dd52e2306b610680e705974e2f4b971eace03/src/jit.jl l240-l246 this is incompatible with the assumptions made by base's llvm passes, which aren't ipo safe. the resulting ir contains operations that violate eg. some gc invariants, as spotted by the gc invariant verifier pass only active in a julia debug build : illegal store of decayed value store { i64 } addrspace 11 %2, { i64 } addrspace 11 % temp .i @keno has mentioned that those passes ought to be ipo safe, and i haven't run into codegen issues because if this; just opening an issue to track progress.