 URL : "https://github.com/dadi/api-filestore/issues/9" TITLE : various small fixes BODY : as part of the change to the api test suite, i found a couple of small fixes that need to be applied to this connector. i'm more than happy to work on them, just keeping them here for reference: - the various operations need to return a rejected promise if a connection with the database can't be established i.e. readystate isn't 1 - the update method needs to return an object with a matchedcount property, not an array of documents https://github.com/dadi/api-filestore/blob/master/lib/index.js l339 - in my opinion, the connector should be stripping about lokijs-specific properties from the output e.g. $loki . this can cause problems if consumers take a document and send it right back to api, since a field that is not in the collection schema will cause a validation error - the $push keyword needs to be reinstated for history to work as expected