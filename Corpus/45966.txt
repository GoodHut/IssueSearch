 URL : "https://github.com/jemalloc/jemalloc/issues/1011" TITLE : jemalloc exhausts vma BODY : we have a multithreading server that utilizes rocksdb。once a while, the server crashed during the full compaction process of rocksdb。the backtrace indicated that it was due to a huge 32mb memory allocation failure. with further inspections on the lucky servers, we found that the number of vma was nearly exhausted 63550 out of 65530 . so, here are the quetions: in what circumstances can a process occupy way more virtual memory spaces than it actually needs? what's the best practice to avoid this issue, in terms of jemalloc's options and the memory usage pattern of the applications? besides increasing vm.max_map_count , are there any other workarounds to deal with this? fyr. we use jemalloc 4.4.0, and linux kernel is 3.10, on x86_64 platform. thanks!