 URL : "https://github.com/liuchong/docker-rustup/issues/4" TITLE : can't update toolchains BODY : i tried to build a docker image based on your rustup images thank you so much for these, by the way , and wanted to update the nightly toolchain to the one that's currently out, using this naive method: dockerfile rustup update nightly sadly, this runs into the following problem in docker: <details> <summary>unable to update due to layerfs</summary> step 3/4 : run rustup update nightly ---> running in 8b72657bbc0c  91minfo: syncing channel updates for 'nightly-x86_64-unknown-linux-gnu'  0m  91minfo: latest update on 2017-09-16, rust version 1.22.0-nightly fd4bef54a 2017-09-15  0m  91minfo: downloading component 'rustc'  0m  91minfo: downloading component 'rust-std'  0m  91minfo: downloading component 'cargo'  0m  91minfo: downloading component 'rust-docs'  0m  91minfo: removing component 'rustc'  0m  91minfo: removing component 'rust-std'  0m  91minfo: removing component 'cargo'  0m  91minfo: removing component 'rust-docs'  0m  91minfo: rolling back changes  0m  91merror: could not rename component directory from '/root/.rustup/toolchains/nightly-x86_64-unknown-linux-gnu/share/doc/rust/html' to '/root/.rustup/tmp/omziwl1d4tvp_f9p_dir/bk' info: caused by: invalid cross-device link os error 18  0m removing intermediate container 8b72657bbc0c the command '/bin/sh -c rustup update nightly' returned a non-zero code: 1 </details> you can also see the build output on docker hub here: https://hub.docker.com/r/antifuchs/rustup-ci/builds/bh6g3fkmuykk32sav82vqlu/ i wonder if there's something that these docker images could work around, so i'm reporting this here; it might just be unsolvable & i might have to remove the nightly toolchain and tmp dir before attempting the update. anyway, if you know of a solution that might work, i'd love to hear about it!