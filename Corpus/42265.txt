 URL : "https://github.com/redhat-cip/dci-infra/issues/1" TITLE : api: psql check fails BODY : the psql command made to check if the db is already present doesn't load the posgresql 9.4 environment file and fails : task dci-api : check if db is already in place fatal: dci-api : failed! => { changed : true, cmd : psql -u dci -h 10.0.0.7 -d dci -w -c 'select from users' , delta : 0:00:00.003722 , end : 2017-07-14 20:54:30.461647 , failed : true, rc : 127, start : 2017-07-14 20:54:30.457925 , stderr : /bin/sh: psql: command not found , stdout : , stdout_lines : , warnings : } t we need to source the /opt/rh/rh-postgresql94/enable file before the command https://github.com/redhat-cip/dci-infra/blob/master/roles/dci-api/tasks/main.yml l168