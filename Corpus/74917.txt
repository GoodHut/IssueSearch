 URL : "https://github.com/mihaipopescu/uncrustify/issues/135" TITLE : fix to ignore asm blocks BODY : asm blocks have a few ways of being opened and closed depending on the compiler. detect and ignore the contents, including alignment. startprofile_rdtsc and endprofile_rdtsc in physicsmanager.cpp gets fucked up asm indentation fucked up \_\_asm\_\_ quoted string stuff in atomicqueue.cpp plus embedded \t's and indentation workaround: can always fall back on disable/enable_processing_cmt. expected versus output diff:
--- diff // asm blocks have a few ways of being opened and closed depending on the compiler. detect and ignore the contents, including alignment. // fucked up \_\_asm\_\_ quoted string stuff in atomicqueue.cpp plus embedded \t's and indentation // workaround: can always fall back on disable/enable_processing_cmt. void foo { __asm__ __volatile__ - 0: \t - bar %0, %4 \t - 1: \t + 0: \t + bar\t%0, %4 \t + 1: \t ; } --- 10054-uni-1344.cpp https://gist.githubusercontent.com/mihaipopescu/6f861d8909796ba6ae4f3cd2e1db1e71/raw/be6e3c6115c01060ceb005e9c02b4fb2d8965ec0/10054-uni-1344.cpp 10054-uni-1344.cpp.log https://gist.githubusercontent.com/mihaipopescu/6f861d8909796ba6ae4f3cd2e1db1e71/raw/0cf4085e24e1c0ff8ec8ef983f4fefa82971eb60/10054-uni-1344.cpp.log 10054-uni-1344.cpp.unc https://gist.githubusercontent.com/mihaipopescu/6f861d8909796ba6ae4f3cd2e1db1e71/raw/b007350dc8c94a2206b9b201f77f6fcb4a77054f/10054-uni-1344.cpp.unc uncrustify.cpp.cfg https://gist.githubusercontent.com/mihaipopescu/6f861d8909796ba6ae4f3cd2e1db1e71/raw/23d62d9dba5caf352fdc1793792e98eed4b81929/uncrustify.cpp.cfg uni-1344.cpp https://gist.githubusercontent.com/mihaipopescu/6f861d8909796ba6ae4f3cd2e1db1e71/raw/be1902f275a7a8a15699a5d8b3bfb2f1cdf72d12/uni-1344.cpp