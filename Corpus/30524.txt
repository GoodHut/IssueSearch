 URL : "https://github.com/coreos/flannel/issues/890" TITLE : portmap plugin lost BODY : flannel v0.9.1 image does not contains portmap plugin enabled in https://github.com/coreos/flannel/commit/014b2d52dfdc5008f5671c9aed4c5c9ebc34db80 diff-7891b552b026259e99d479b5e30d31ca expected behavior working cluster current behavior kube-dns pod in containercreating state with failed create pod sandbox. journalctl shows: cni.go:265 cni failed to retrieve network namespace path: cannot find network namespace for the terminated container 8046a5441a0f18637c643665d0d7bbf77ced11a0e987f9ee1f633e8e95afe952 cni.go:319 error deleting network: failed to find plugin portmap in path /opt/flannel/bin /opt/cni/bin remote_runtime.go:115 stoppodsandbox 8046a5441a0f18637c643665d0d7bbf77ced11a0e987f9ee1f633e8e95afe952 from runtime service failed: rpc error: code = unknown desc = networkplugin cni failed to teardown pod kube-dns-545bc4bfd4-sbhpp_kube-system network: failed to find plugin portmap in path /opt/flannel/bin /opt/cni/bin kuberuntime_gc.go:152 failed to stop sandbox 8046a5441a0f18637c643665d0d7bbf77ced11a0e987f9ee1f633e8e95afe952 before removing: rpc error: code = unknown desc = networkplugin cni failed to teardown pod kube-dns-545bc4bfd4-sbhpp_kube-system network: failed to find plugin portmap in path /opt/flannel/bin /opt/cni/bin possible solution do not enable portmap http://raw.githubusercontent.com/coreos/flannel/v0.9.1/documentation/kube-flannel.yml steps to reproduce for bugs 1. kubeadm init --pod-network-cidr=10.244.0.0/16 2. kubectl apply -f http://raw.githubusercontent.com/coreos/flannel/master/documentation/kube-flannel.yml 3. kubeadm init join ... your environment flannel version: v0.9.1 backend used e.g. vxlan or udp : vxlan kubernetes version if used : v1.8.4 operating system and version: debian 9