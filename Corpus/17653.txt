 URL : "https://github.com/matsumotory/ngx_mruby/issues/268" TITLE : random return 502 BODY : i'm encounering strange behavior. upstream unicorn_server { server unix:/app/tmp/sockets/unicorn.sock fail_timeout=0; } server { location / { mruby_access_handler_code ' req = nginx::request.new body = case req.method when post , put rc = req.read_body nginx.log nginx::log_err, ===== rc: {rc} ===== req.get_body else end nginx.log nginx::log_err, ===== body: {body} ===== '; proxy_pass http://unicorn_server; } } in almost every case, request success with this logs ===== rc:0 ===== ===== body:{ hello : ngx_mruby } ===== but in very rare case, request failed with 502 and logs ===== rc:-2 ===== ===== body: ===== how should i handle in this case? i want to send to the proxy app even failed case.