 URL : "https://github.com/cristim/instance-drainer/issues/3" TITLE : instance filters epic BODY : we should have a number of filters that allow selecting various instances for draining: - current instance, based on ec2 metadata information - one or more instances from a given availability zone - one or more instances from a given group, more often than not combined with the previous az filter in order to avoid entirely draining the group, but sometimes it may make sense to have it per entire group, like if the group is part of a multi-group pool - support multiple types of groups: elb, elbv2, ecs, autoscaling group, each with multiple items or glob matching of their names - support filtering by instance type across the entire pool - support filtering by instance lifecycle, such as spot, this could be combined with the previous for example in case we want to drain all instances of a certain spot instance type from a given az in case it became too expensive these filters should support being combined at will, wherever that makes sense, but it should be an and type of filter, always picking the instances satisfying them all at the same time in order to not avoid the chance of human errors like it recently happened in the s3 downtime incident. the machines matching the filters should be able to be displayed for confirmation, considering interactive use cases