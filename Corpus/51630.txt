 URL : "https://github.com/hashicorp/terraform/issues/12548" TITLE : aws customer gateways. BODY : hi there, thank you for opening an issue. please note that we try to keep the terraform issue tracker reserved for bug reports and feature requests. for general usage questions, please see: https://www.terraform.io/community.html. terraform version 0.8.8 affected resource s aws_customer_gateway terraform configuration files hcl resource aws_customer_gateway usw2-removed1 { bgp_asn = 65000 ip_address = 1.1.1.1 type = ipsec.1 tags { name = usw2-removed1 } } resource aws_customer_gateway usw2-removed2 { bgp_asn = 65000 ip_address = 1.1.1.1 type = ipsec.1 tags { name = usw2-removed2 } } debug output please provider a link to a github gist containing the complete debug output: https://www.terraform.io/docs/internals/debugging.html. please do not paste the debug output in the issue; just paste a link to the gist. panic output if terraform produced a panic, please provide a link to a github gist containing the output of the crash.log . expected behavior give the error duplicate bgp asn exists for the given ip in another customer gateway actual behavior it checked that the ip address existed and didn't check for a duplicate. now, i can't remove the second entry, because incorrectstate: the customer gateway is in use. which is correct. steps to reproduce please list the steps required to reproduce the issue, for example: build two identical customer gateways. delete the duplicate. important factoids references