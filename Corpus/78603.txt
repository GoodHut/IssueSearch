 URL : "https://github.com/pencilblue/pencilblue/issues/1210" TITLE : question/bug: init order BODY : description: this is more so a question that i am very confused by than an out-right bug/issue. the init stack is as follows. util.wraptimedtask this, this.initmodules, 'initmodules' , util.wraptimedtask this, this.initrequesthandler, 'initrequesthandler' , util.wraptimedtask this, this.initdbconnections, 'initdbconnections' , util.wraptimedtask this, this.initdbindices, 'initdbindices' , util.wraptimedtask this, this.initserverregistration, 'initserverregistration' , util.wraptimedtask this, this.initcommandservice, 'initcommandservice' , util.wraptimedtask this, this.initsitemigration, 'initsitemigration' , util.wraptimedtask this, this.initsessions, 'initsessions' , util.wraptimedtask this, this.initplugins, 'initplugins' , util.wraptimedtask this, this.initsites, 'initsites' , util.wraptimedtask this, this.initlocales, 'initlocales' , util.wraptimedtask this, this.initlibraries, 'initlibraries' , util.wraptimedtask this, this.registermetrics, 'registermetrics' , util.wraptimedtask this, this.initserver, 'initserver' so, the initserver is the very last thing that runs in the stack. inside of initserver is when the middleware stack is built out. this is after the plugin's get a chance to run their onstartupwithcontext functions. in your example code, you suggest swapping out middleware in these blocks. however, i do not have access to the middleware set at this point. was this the intent? based on your blog post with examples of using the new feature i would say that it is not. thus i am wondering if i am missing something. steps to reproduce: n/a configuration details: multisite, running locally. log output: n/a pencilblue version: 0.8.0 node.js version: 4.2.2 environment description: osx