 URL : "https://github.com/ucb-bar/firrtl/issues/529" TITLE : make deterministic digraph BODY : non-deterministic digraph is fine for checking for combinational loops, but any time graph functionality is desired for code generation, it needs to be deterministic. this determinism is maintained throughout the firrtl compiler by using linkedhashmaps. protip, there's a scala bug https://issues.scala-lang.org/browse/si-9594 that we have been burned by https://github.com/ucb-bar/firrtl/pull/303 multiple times https://github.com/ucb-bar/rocket-chip/pull/603 issuecomment-289145356 where if you iterate on the keys of a linkedhashmap, the iteration order is no longer deterministic . this we should always iterate on the keys and values together.