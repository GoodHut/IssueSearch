 URL : "https://github.com/powermock/powermock/issues/868" TITLE : whennew is not work BODY : gradle: gradle testcompile 'junit:junit:4.12' testcompile org.powermock:powermock-core:1.6.1 testcompile org.powermock:powermock-module-junit4:1.6.1 testcompile org.powermock:powermock-module-junit4-rule:1.6.1 testcompile org.powermock:powermock-api-mockito:1.6.1 testcompile org.powermock:powermock-classloading-xstream:1.6.1 java : public flowable<gankhttpresponse<list<gankitembean>>> getgirllist int num, int page { if networkutils.isnetworkconnected app { return gankapi.getgirllist num, page ; } else { gankitembeandao gankitembeandao = dao.getgankitembeandao ; list<gankitembean> list = gankitembeandao.querybuilder .offset page num .limit num .list ; gankhttpresponse<list<gankitembean>> gankhttpresponse = new gankhttpresponse<> false, list ; return flowable.just gankhttpresponse ; } } test: // 返回没有网络 when networkutils.isnetworkconnected app .thenreturn false ; whennew gankhttpresponse.class .witharguments anyboolean ,any list.class .thenreturn gankhttpresponse ; flowable<gankhttpresponse<list<gankitembean>>> daogirllist = repository.getgirllist 10, 1 ; testsubscriber<gankhttpresponse<list<gankitembean>>> daotestsubscriber = new testsubscriber<> ; daogirllist .subscribe daotestsubscriber ; daotestsubscriber.assertnoerrors ; it didn't return the results i wanted, and i suspected there was no work at all. whennew gankhttpresponse.class .witharguments anyboolean ,any list.class .thenreturn gankhttpresponse ;