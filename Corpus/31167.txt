 URL : "https://github.com/galaxyproject/tools-iuc/issues/1479" TITLE : samtools sort error BODY : a little bug one of our users encountered on 17.05 : using samtools sort https://github.com/galaxyproject/tools-iuc/blob/master/tool_collections/samtools/samtools_sort/samtools_sort.xml with the -n option https://github.com/galaxyproject/tools-iuc/blob/master/tool_collections/samtools/samtools_sort/samtools_sort.xml l22 produces a bame file sorted by read names hich is intended , but galaxy then fails to set metadata on the result with this error: traceback most recent call last : file /opt/galaxy-dist/lib/galaxy/jobs/runners/__init__.py , line 630, in finish_job job_state.job_wrapper.finish stdout, stderr, exit_code file /opt/galaxy-dist/lib/galaxy/jobs/__init__.py , line 1266, in finish dataset.datatype.set_meta dataset, overwrite=false file /opt/galaxy-dist/lib/galaxy/datatypes/binary.py , line 411, in set_meta raise exception error setting bam metadata: %s % stderr exception: error setting bam metadata: e::hts_idx_push unsorted positions samtools index: /opt/galaxy-dist/database/files/002/058/dataset_2058596.dat is corrupted or unsort i don't really see how to solve this, the bam file is indeed not indexable but it was asked by the user to have it unsorted... any idea? ping @cmonjeau