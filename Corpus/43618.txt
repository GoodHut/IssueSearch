 URL : "https://github.com/rstudio/keras/issues/213" TITLE : custom generator in r BODY : hello, i implemented a data generator which has a number of batch variable in its logic. if i increment the batch with the <<- operator r just freezes. if i get rid of the increment in batch it trains but of course only on the first batch. i am not the best with r environments anyone got an idea? this is the complete code: batchgen<- function buckets, batch_size, bucket_plan { batch<-1 function { if batch > length bucket_plan { batch<<-1 } bucketid is a named integer: the integer indicates the batch id for the given bucket used to fetch appropriate samples within the bucket the name is a character containing the sequence length of the bucket bucketid<- bucket_plan batch idx<- bucketid-1 batch_size + 1:batch_size data<- buckets names bucketid $data idx,, label<- buckets names bucketid $label idx trainnum=as.integer data ,,1 dim trainnum <-c batch_size,as.integer names bucketid trainbet= data ,,2 dim trainbet <-c batch_size,as.integer names bucketid ,1 trainfac=as.integer data ,,3 dim trainfac <-c batch_size,as.integer names bucketid xtrain = list nummerinput = trainnum, betraginput = trainbet,factorinput=trainfac list xtrain,label batch<<-batch+1 } }