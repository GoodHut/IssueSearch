 URL : "https://github.com/boostorg/lockfree/issues/38" TITLE : wrong predef flag usage BODY : working on a new boost release i found the lockfree queue stopped working proper and tracked it down: some x86_64 codes are included improperly in a couple of files, namely in boost/lockfree/detail/prefix.hpp and tagged_ptr_ptrcompression.hpp: ifdef boost_arch_x86_64 should be if boost_arch_x86_64 otherwise codes on all the other archs will include the wrong piece. i tested the change on powerpc and it works fine so far.