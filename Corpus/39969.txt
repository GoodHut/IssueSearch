 URL : "https://github.com/CartoDB/odbc_fdw/issues/60" TITLE : support postresql 10 BODY : @juanignaciosl was able to make it compile with a patch like this: diff --git a/makefile b/makefile index ab7232e..641a432 100644 --- a/makefile +++ b/makefile @@ -16,7 +16,7 @@ module_big = odbc_fdw objs = odbc_fdw.o -pgversion ?= 9.5 +pgversion ?= 10 extension = odbc_fdw data = odbc_fdw--0.0.1.sql \ @@ -44,6 +44,3 @@ include $ pgxs generated_sql_files = $ wildcard $ test_dir /sql/ .sql -integration_tests: - bash test/scripts/tests-generator.sh - make installcheck diff --git a/odbc_fdw.c b/odbc_fdw.c index 9afc8b0..9ab2195 100644 --- a/odbc_fdw.c +++ b/odbc_fdw.c @@ -947,7 +947,7 @@ odbc_table_size pg_function_args int tablesize; list tableoptions = nil; node val = node makestring tablename ; - defelem elem = defelem makedefelem defname, val ; + defelem elem = defelem makedefelem defname, val, -1 ; tableoptions = lappend tableoptions, elem ; oid serveroid = oid_from_server_name servername ; @@ -967,7 +967,7 @@ odbc_query_size pg_function_args int querysize; list queryoptions = nil; node val = node makestring sqlquery ; - defelem elem = defelem makedefelem defname, val ; + defelem elem = defelem makedefelem defname, val, -1 ; queryoptions = lappend queryoptions, elem ; oid serveroid = oid_from_server_name servername ; it's not being deeply tested, though