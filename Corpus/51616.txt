 URL : "https://github.com/IndySockets/Indy/issues/50" TITLE : av in tidftp.get in d5 BODY : excecuting tidftp.get results in an access violation in d5. see attached call stack https://github.com/indysockets/indy/files/901046/idftp.zip . the call to get is get 'cashmondat.zip', 'cashmondat.zip', true, false . tidtextencoding.getbytecount tidwidechars, integer, integer is being passed an invalid acharcount parameter value. the corrupted value would have to be coming from the call to length achars in tidtextencoding.getbytecount tidwidechars . tidwidechars is an array of widechar in d5, and the call stack shows valid contents for the array in the achars parameter of getbytecount . stepping inside the cpu window into: result := getbytecount @achars acharindex , acharcount ; call dword ptr ebx uses a wrong address previous calls that worked ok used eax=73eb8 , now it uses 6ddaff instead. this results to the wrong value in ebx.