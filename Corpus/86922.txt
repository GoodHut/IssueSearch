 URL : "https://github.com/stanford-ppl/spatial-lang/issues/224" TITLE : incorrectly code motioned BODY : haven't seen this one in a while, but just ran into it again with the following code: foreach input.rows by rowstride {row => foreach input.cols by coltile {col => lb load input row, col::col+coltile // todo: load with correct rowstride foreach coltile by colstride {j => foreach filter.rows by 1 par filter.rows {i => sr i, <<= lb i,j::j+colstride } lineout j/colstride = if row < filter.rows.to int || col < filter.cols.to int 0.to t else reduce reg t 0.to t filter.rows by 1, filter.cols by 1 { ii,jj => sr ii,jj filter ii,jj }{_+_}.value } output row/rowstride, 0::output.cols store lineout } } if i instead turn the if row < filter...... into a mux, then it works. i can send full app if you want