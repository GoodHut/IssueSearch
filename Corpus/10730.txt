 URL : "https://github.com/certbot/certbot/issues/4078" TITLE : dedupe test code BODY : as pointed out in the discussion of 3972, we have some common patterns in our tests. pattern 1 setup creates a temporary directory and teardown destroys it. pattern 2 setup creates a temporary directory and creates/sets config_dir , work_dir , and/or logs_dir paths to be somewhere inside it. teardown destroys all directories. let's dedupe this code. i think the best approach is to make a class in certbot.tests.util called something like tempdirtestcase for pattern 1 that is a subclass of unittest.testcase and make another class for pattern 2 that is a subclass of tempdirtestcase .