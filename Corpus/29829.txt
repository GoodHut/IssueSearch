 URL : "https://github.com/LLNL/spack/issues/2791" TITLE : mpi on ubuntu 14.04 BODY : i found a neat linker problem on ubuntu 14.04 with both openmpi 2.0.1 and mpich 3.2 in spack. when building a library or app against one of both, in my case hdf5 1.8.x or 1.10/latest the following default dependencies cause problems: - via mpif90 for hdf5's fortran lib, -lnuma tries to get linked but is not found since it was taken from the system - i expected it to get side-pulled in via hwloc in spack , but actually libopen-pal also from system triggers it - the problem is, that only a file called libnuma.so.1 is available on a few debian/ubuntu and supposedly some redhat http://www.shocksolution.com/2013/02/openmpi-on-redhat-5-cannot-find-lnuma/ systems, without a simlink libnuma.so -> libnuma.so if i replace the failing -lnuma to the absolute path used in libopen-pal.so 's libnuma.so.1 this fixes it. this happens when people do only install the package libnuma1 http://packages.ubuntu.com/search?mode=exactfilename&suite=trusty&section=all&arch=any&keywords=libnuma.so.1&searchon=contents lib but forget to install libnuma-dev http://packages.ubuntu.com/search?suite=trusty&arch=any&mode=exactfilename&searchon=contents&keywords=libnuma.so headers & simlinks . the obscure think is now, that hwlock built in spack for mpi brings its own libnuma headers numa.h ! also seems to be included in common linux header packages http://packages.ubuntu.com/search?mode=exactfilename&suite=trusty&section=all&arch=any&keywords=numa.h&searchon=contents . long story short: can and should we built our own libnuma and libopen-pal ?