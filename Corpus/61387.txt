 URL : "https://github.com/arduino/Arduino/issues/6291" TITLE : arduinojson memory leak BODY : hi script dynamicjsonbuffer ox_jsonbuffer 64 ; jsonarray& ox = ox_jsonbuffer.createarray ; uint32_t ix = 0; void timerisr2 //демонстрация утечки памяти { serial.println heap: +string esp.getfreeheap + ix= + string ix ; serial.println size: + string ox.size ; while ox.size { ox.removeat 0 ; } serial.println size: + string ox.size ; jsonobject& ox_item = ox.createnestedobject ; serial.println size: + string ox.size ; serial.println heap: +string esp.getfreeheap ; ix++; } log server started heap:30904 ix=0 size:0 size:0 size:1 heap:30904 heap:28920 ix=51 size:1 size:0 size:1 heap:28920 heap:26856 ix=101 size:1 size:0 size:1 heap:26856 heap:26856 ix=151 size:1 size:0 size:1 heap:26856 heap:22744 ix=201 size:1 size:0 size:1 heap:22744 heap:22744 ix=301 size:1 size:0 size:1 heap:22744 heap:22744 ix=401 size:1 size:0 size:1 heap:22744 heap:14368 ix=1298 size:0 size:0 size:0 heap:14368