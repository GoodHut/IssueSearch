 URL : "https://github.com/darrenliuwei/blog/issues/9" TITLE : apache 配置 cgi 支持 c BODY : cgi，通用网关接口。 common gateway interface，简称cgi。在物理上是一段程序，运行在服务器上，提供同客户端 html页面的接口。这样说大概还不好理解。那么我们看一个实际例子： 现在的个人主页上大部分都有一个留言本。留言本的工作是这样的：先由用户在客户端输入一些信息，如名字之类的东西。接着用户按一下“留言”（到目前为止工作都在客户端），浏览器把 这些信息传送到服务器的cgi目录下特定的cgi程序中，于是cgi程序在服务器上按照预定的方法进行处理。在本例中就是把用户提交的信息存入指定的文件 中。然后cgi程序给客户端发送一个信息，表示请求的任务已经结束。此时用户在浏览器里将看到“留言结束”的字样。整个过程结束。 步骤: 1.安装apache，保证其可以顺利运行。 2.然后配置一下httpd.conf以支持c语言编写的cgi 过程如下: 首先配置apache 主要配置如下： scriptalias /cgi-bin/ e:/apache2/apache2/cgi-bin/ <directory e:/apache2/apache2/cgi-bin > allowoverride none options execcgi order allow,deny allow from all </directory> addhandler cgi-script .exe .pl .cgi 保存文件，重启apache服务器 说明: 1 e:/apache2/apache2/cgi-bin/ 为你安装的apache下的agi-bin目录哦,父目录与子目录之间用/分开 2 至于addhandler好象是安装exe,pl,cgi文件后缀驱动，但是我在下面执行正确编写并编译好的exe文件改成诸如没有文件后缀、文件后缀为任意类型时也正确。 写一个helloworld.c的cgi,代码如下： include <stdio.h> int main void { printf ; //这个必须有 printf hello, world! ; return 0; } include <stdio.h> int main void { printf content-type:text/html; charset=gb2312; ;//后面必须加两个回车 printf <html> ; printf <head><title>乘法结果</title></head> <body> printf <h3>乘法结果</h3> ; printf </body> </html> ; return 0; } 用vc6.0及以上的版本编译一下，生成了helloworld.exe，复制到apache的cgi-bin目录下 注意： 1 用vc编译可以保证正常运行，用turboc2编译会出现错误，无法执行，原因可能是后者为16位编译器，前者为32位编译器的缘故。 2 必须首先输出一个空行，如果不输出该空行，则会出现题为“internal server error”的错误，所以第一行的printf ;这个必须有。 运行程序时，打开网页，在地址栏中输入： http://127.0.0.1/cgi-bin/helloworld.cgi 浏览网页看结果。