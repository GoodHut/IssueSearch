 URL : "https://github.com/typelead/eta/issues/403" TITLE : fix getclassop mess BODY : the getclass primop does type inspection in order to determine the which java.lang.class object to retrieve for jwts. this works great for fully instantiated functions the common case of getclass but will give undesired results for polymorphic, uninlined/unspecialized functions. this is bad and will be a wart in the standard library if not fixed asap. the solution would be to: 1. add a new method to the class typeclass: haskell instance class a where .. classidentifier :: jstring and this will store the actual class name for a jwt that can be retrieved properly through the standard typeclass dispatch mechanism. 2. modify the deriving mechanism for class to fill in classidentifier by extracting the class annotation from the jwt. this step is crucial and will automatically fix existing code since the docs already recommend to use deriving class .