 URL : "https://github.com/vlucas/frisby/issues/397" TITLE : create frisby after json BODY : how to create frisby after json, this is my code: const frisby = require 'frisby' ; it 'login success 200 ', function uu { frisby.post 'https://yapulsav2api.sumpahpalapa.com/api/v1/user/login',{ body:{ username : 081290173737 , password : 123456 }, headers:{ 'content-type': 'application/json' } } .expect 'status', 200 //assert1 .then function login { frisby .setup { request: { headers: { 'content-type': 'application/json', 'authorization': 'bearer '+login.body.data.access_token } } } .get 'https://yapulsav2api.sumpahpalapa.com/api/v1/master/mapi/list' .expect 'status', 200 //assert1 .inspectstatus .inspectjson .done login ; } .done uu ; } and the response like this, inspect not print fransiska-air:lokal_firsbyv2_versi1.0 fransiska$ ./node_modules/.bin/jest pass __tests__/post_master-app_files_add_new-spec.js test suites: 1 passed, 1 total tests: 1 passed, 1 total snapshots: 0 total time: 3.152s ran all test suites. node:9402 unhandledpromiserejectionwarning: unhandled promise rejection rejection id: 1 : typeerror: donefn is not a function node:9402 unhandledpromiserejectionwarning: unhandled promise rejection rejection id: 2 : typeerror: cannot read property 'addexpectationresult' of undefined fransiska-air:lokal_firsbyv2_versi1.0 fransiska$