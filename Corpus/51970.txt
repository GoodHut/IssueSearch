 URL : "https://github.com/i-bash/pg-dev1-web/issues/10" TITLE : buy books via function BODY : egor rogov: 12. пока разбирался с последней темой разграничение доступа , понял, что в магазине надо покупать книги не прямым обновлением catalog_v, а через вызов функции buy_book. иначе не получается аккуратно развести роли по полномочиям. вот такую можно использовать: create or replace function buy_book book_id integer returns void as $$ begin insert into operations book_id, qty_change values book_id, -1 ; end; $$ volatile language plpgsql;