 URL : "https://github.com/UV-CDAT/cdms/issues/71" TITLE : cdscan path needs a patch BODY : some time ago, i had encountered a problem where cdscan was dropping some small axes needed for cloud variables. i had fixed it by adding a dummy variable which used the axes, all_axes_dummy. of course, all_axes_dummy is a transientvariable. but all the other variables are filevariables, hence datasetvariables. a transientvariable is a numpy masked array, and hence contains an integer-valued variable 'size'. a datasetvariable isn't, but contains a method size which returns an integer. this could become a problem somewhere around line 1180: sepname = disambig var.id, vardict, var.size , comparevardictvalues, tempdomain, none and it really does become a problem on erbe obs data. this has a little axis date, length 1, which looks to the other code like one of those cloud axes. so all_axes_dummy is created, and then eventually fails at that sepname computation. there are many ways around this problem. the simplest to replace var.size with numpy.ma.size var the only qualm i have is that filevariable doesn't inherit from numpy, so i'm not sure that we can rely on numpy.ma.size var to always work. maybe we can, but if we can't there are alternative solutions.