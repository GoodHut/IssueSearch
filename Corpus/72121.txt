 URL : "https://github.com/kubernetes/test-infra/issues/5916" TITLE : aws ha testing with kops BODY : thanks, @nckturner this is the issue that i mentioned i would file, please take a look and let me know what questions you have. this is an outline of the changes that need to occur in test-infra in order for ha testing with kops. these test runs are a start at fulfilling https://github.com/kubernetes/kubernetes/issues/54511. using regions with 3 aws az the typical kops setup for an ha control plane is to have each master in its own az. currently, the python wrapper does not check if the region has three az and uses a single az. we have two options. add a second helper method for ha or modify the current method. we probably should just run in a random region with 3 az. here is the code that selects a random region to run in: https://github.com/kubernetes/test-infra/blob/master/scenarios/kubernetes_e2e.py l446-l455 we will also need to pass in three zones with e2e test runner. @justinsb thoughts on this? new e2e test for kops once the region code is running, we can create a new e2e test for kops. here is an example https://github.com/kubernetes/test-infra/pull/5776 where we setup e2e for the m5 instance type. create a brand new e2e test and add --kops-args=--master-count=3 . you can see here https://github.com/kubernetes/test-infra/pull/5776/files diff-5539d275f091e62154f51653bbe4fba0r8126 that we added params for the m5 type, instead add parameters for the master count. /cc @justinsb @nckturner @eswarbala