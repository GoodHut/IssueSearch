 URL : "https://github.com/funtoo/keychain/issues/82" TITLE : bug when using identities BODY : here's my sample config ~/.ssh/config : host example hostname example.com user bob identityfile ~/.ssh/id_rsa_2 identitiesonly yes in ~/.ssh/ are 2 key files ~/.ssh/id_rsa and ~/.ssh/id_rsa_2 . keychain is started with eval keychain --eval id_rsa id_rsa_2 . what should happen $ ssh example example:~ $ what happens instead $ ssh -v example openssh_7.5p1, openssl 1.1.0f 25 may 2017 debug1: reading configuration data /home/user/.ssh/config ... debug1: found key in /home/bob/.ssh/known_hosts:1 host key fingerprint is sha256:vt2c7aqo9hg107..... ... debug1: authentications that can continue: publickey debug1: next authentication method: publickey debug1: offering rsa public key: /home/bob/.ssh/id_rsa received disconnect from 192.168.0.555 port 22:2: too many authentication failures for bob authentication failed. final thoughts from the ssh_config man page: > identitiesonly > specifies that ssh 1 should only use the authentication identity and certificate files explicitly configured in the > ssh_config files or passed on the ssh 1 command-line, even if ssh-agent 1 or a pkcs11provider offers more identi‐ > ties. the argument to this keyword must be yes or no the default . this option is intended for situations where > ssh-agent offers many different identities. i think keychain doesn't correctly handle this config setting. it should try the given key first and no other key but instead it falls back to default behavior and tries all known keys. to me this looks like a bug.