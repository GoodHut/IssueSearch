 URL : "https://github.com/tarantool/tarantool/issues/2800" TITLE : fix space formats checking BODY : first: s = box.schema.space.create 'test', {engine = 'vinyl', field_count = 2 --- ... tarantool> pk = s:create_index 'pk' --- ... tarantool> s:replace{1, 2} --- - 1, 2 ... tarantool> t = box.space._space:select{s.id} 1 :totable --- ... tarantool> t 5 = 1 --- ... tarantool> box.space._space:replace t --- - error: index 'pk' tree of space 'test' vinyl does not support size ... second: box.cfg{} format = {} format 1 = {name = 'id', type = 'unsigned'} format 2 = {name = 'field2', type = 'unsigned'} format 3 = {name = 'field3', type = 'unsigned'} s = box.schema.space.create 'test', {format = format} pk = s:create_index 'pk' sk = s:create_index 'sk', { parts = {2, 'unsigned'} } s:replace{1, 2, 3} format 3 .type = 'string' s:format format must fail, but it does not.