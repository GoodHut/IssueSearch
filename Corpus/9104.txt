 URL : "https://github.com/linkedin/spaniel/issues/49" TITLE : tests are flaky BODY : the test are very dependent on nightmare.wait . the asynchronous nature of the implementation makes things hard to test, but there are some tests that are flaky on local machines. a few potential fixes: improve timing issues 1. introduce impression_threshold and raf_threshold constants so that it's not a pain to change all the test wait values every time we want to change thresholds or tweak global timing variables. 2. increase the default impression threshold https://github.com/linkedin/spaniel/blob/master/test/app/index.js l24 for tests 3. increase raf/general sync padding try another headless browser like headless chrome. we would just need to re-implement spanielcontext https://github.com/linkedin/spaniel/blob/master/test/headless/spaniel-context.js and context https://github.com/linkedin/spaniel/blob/master/test/headless/context.js