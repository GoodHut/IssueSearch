 URL : "https://github.com/criticalstack/libevhtp/issues/51" TITLE : evhtp_set_gencb don't work BODY : details steps or code to reproduce the problem. evhtp_set_gencb don't work. instead first evhtp_set_cb callback called. compile code request http://localhost:8081/ you will get simple instead of root same result if you request http://localhost:8081/some_random_text_jfjfjfj example code if applicable this is modified version of test_basic.c c include <stdio.h> include <stdlib.h> include <string.h> include <stdint.h> include <errno.h> include <evhtp.h> void testcb evhtp_request_t req, void a { const char str = a; evbuffer_add req->buffer_out, str, strlen str ; evhtp_send_reply req, evhtp_res_ok ; } void issue161cb evhtp_request_t req, void a { struct evbuffer b = evbuffer_new ; if evhtp_request_get_proto req == evhtp_proto_10 { evhtp_request_set_keepalive req, 0 ; } evhtp_send_reply_start req, evhtp_res_ok ; evbuffer_add b, foo , 3 ; evhtp_send_reply_body req, b ; evbuffer_add b, bar , 5 ; evhtp_send_reply_body req, b ; evhtp_send_reply_end req ; evbuffer_free b ; } int main int argc, char argv { evbase_t evbase = event_base_new ; evhtp_t htp = evhtp_new evbase, null ; evhtp_set_cb htp, /simple/ , testcb, simple ; evhtp_set_cb htp, /1/ping , testcb, one ; evhtp_set_cb htp, /1/ping.json , testcb, two ; evhtp_set_cb htp, /issue161 , issue161cb, null ; // vvvvvvvvvvvvvvvvvvvvvvvvv evhtp_set_gencb htp, testcb, root ; // ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ ifndef evhtp_disable_evthr evhtp_use_threads_wexit htp, null, null, 8, null ; endif evhtp_bind_socket htp, 0.0.0.0 , 8081, 2048 ; event_base_loop evbase, 0 ; evhtp_unbind_socket htp ; evhtp_free htp ; event_base_free evbase ; return 0; } version latest