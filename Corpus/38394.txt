 URL : "https://github.com/swoole/swoole-src/issues/1399" TITLE : php 7.2 incompatible BODY : please answer these questions before submitting your issue. thanks! 1. what did you do? if possible, provide a recipe for reproducing the error. $http = new swoole_http_server 0.0.0.0 , 9501 ; $http->on start , function $server { echo swoole http server is started at http://0.0.0.0:9501 ; } ; $http->on request , function $request, $response { $response->header content-type , text/plain ; $response->end hello world ; } ; 2. what did you expect to see? âžœ swoole php http.php php: /opt/myprj/src/php-src-php-7.2.0rc6/zend/zend_hash.c:549: _zend_hash_add_or_update_i: assertion ht ->gc.refcount == 1 || ht ->u.flags & 1<<6 ' failed. 1 1246 abort core dumped php http.php 3. what did you see instead? 4. what version of swoole are you using php --ri swoole ? php --ri swoole swoole swoole support => enabled version => 2.0.10 author => tianfeng.han email: mikan.tenny@gmail.com epoll => enabled eventfd => enabled timerfd => enabled signalfd => enabled cpu affinity => enabled spinlock => enabled rwlock => enabled async http/websocket client => enabled linux native aio => enabled pcre => enabled zlib => enabled mutex_timedlock => enabled pthread_barrier => enabled futex => enabled directive => local value => master value swoole.aio_thread_num => 2 => 2 swoole.display_errors => on => on swoole.use_namespace => on => on swoole.fast_serialize => off => off swoole.unixsock_buffer_size => 8388608 => 8388608 5. what is your machine environment used including version of kernel & php & gcc ? php 7.2.0rc6 cli built: nov 26 2017 17:49:24 zts debug copyright c 1997-2017 the php group zend engine v3.2.0-dev, copyright c 1998-2017 zend technologies 6. if you are using ssl, what is your openssl version?