 URL : "https://github.com/mapbox/resistbotmap/issues/6" TITLE : add more tests BODY : porting over @gretacb's comments from a prior pr tests - add a few more unit tests - might be useful to mock mongodb https://github.com/williamkapke/mongo-mock to setup specific unit tests, for example to mock when there _is_ and _is not_ data in the database https://github.com/resistbot/mapping/blob/805d8c23f126dca4dfe71451f44c4bcb47b60606/rapidpro/rapidproapi.js l75-l91 . - you may also need to stub: - .find https://github.com/resistbot/mapping/blob/805d8c23f126dca4dfe71451f44c4bcb47b60606/rapidpro/rapidproapi.js l75 - .save https://github.com/resistbot/mapping/blob/805d8c23f126dca4dfe71451f44c4bcb47b60606/rapidpro/rapidproapi.js l58 - request.get https://github.com/resistbot/mapping/blob/805d8c23f126dca4dfe71451f44c4bcb47b60606/rapidpro/rapidproapi.js l30 with expected json values https://github.com/resistbot/mapping/blob/805d8c23f126dca4dfe71451f44c4bcb47b60606/rapidpro/rapidproapi.js l46-l54 for a successful response thinking it might be best to finalize this pr before moving forward with the other pieces, so that the code's preliminary expected behaviour and tests are known and reliable going forward.