 URL : "https://github.com/ARMmbed/mbed-os/issues/4007" TITLE : efm32pg thread never wakes BODY : - type: bug - priority: major --------------------------------------------------------------- bug target efm32pg_stk3401 toolchain: arm toolchain version: mbed-cli version: 1.0.0 if all threads are idle and the idle thread gets called which calls sleep threads never wake up. the below code demonstrates the problem. it needs to be compiled in release and after each program the power to the target cycled, reset is not enough as it seems to prevent sleep. if the while 1 is called which prevents an idle it works as expected. expected results. led0 toggles every 10 seconds or when btn1 is pressed. led1 toggles when btn1 is pressed actual results after power cycle. led0 and led1 toggles when btn1 is pressed actual results after program. led0 toggles every 10 seconds or when btn1 is pressed. led1 toggles when btn1 is pressed c++ include mbed.h digitalout led1 led1 ; digitalout led0 led0 ; interruptin button btn1 ; thread testthread; void testtask { while true { thread::signal_wait 0x01,10000 ; led0=!led0; } } void button { testthread.signal_set 0x01 ; led1=!led1; } int main void { button.fall &button ; // attach the address of the flip function to the rising edge testthread.start callback testtask ; //no sleeping allowed if the below line is called //while 1 ; }