 URL : "https://github.com/berkmancenter/namae/issues/22" TITLE : name isn't thread safe BODY : this causes issues, especially if you are using a threaded webserver like puma https://github.com/puma/puma the following code reproduces the error: ruby require 'namae' name1_s = foo bar name2_s = baz name1 = namae.parse name1_s .first r1 = name1.given, name1.family name2 = namae.parse name2_s .first r2 = name2.given, name2.family $issues = def verify str, expected name = namae.parse str .first if name == nil $issues << {error: parser returned nil } return end result = name.given, name.family if result != expected $issues << { name: str, expected: expected, result: result, } end end n = 10_000 name1_s, r1 , name2_s, r2 .map do |str, expected| thread.new do n.times do verify str, expected end end end.each &:join require pp pp $issues example output: {:name=> baz , :expected=> baz , nil , :result=> foo , bar }, {:name=> foo bar , :expected=> foo , bar , :result=> baz , nil }, {:name=> baz , :expected=> baz , nil , :result=> ba , r }, {:error=> parser returned nil } {:name=> foo bar , :expected=> foo , bar , :result=> baz , nil }, {:name=> baz , :expected=> baz , nil , :result=> bar , nil }, {:name=> foo bar , :expected=> foo , bar , :result=> foo , baz }, {:error=> parser returned nil }, {:error=> parser returned nil }, {:name=> foo bar , :expected=> foo , bar , :result=> foo , nil } presumable this is because it uses a stateful singleton. https://github.com/berkmancenter/namae/blob/6b0f69ad36746a4ac21b394aa3667f560c2b561c/lib/namae/parser.rb l9