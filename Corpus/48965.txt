 URL : "https://github.com/mcanevet/rspec-puppet-facts/issues/63" TITLE : strict fact retrieval BODY : supported os entries in metadata.json which don't match any facts are simply silently dropped. this could happen when the user has a typo in the os name or in any of the os release names, or if facterdb has not yet been populated with facts for the given os name and release. for example, given a semantically correct support matrix like so: json operatingsystem_support : { operatingsystem : centos , operatingsystemrelease : 6 , 7 } on_supported_os could have 0, 1 or 2 entries depending on facter version and facterdb parity. thus with the recommended use pattern for on_supported_os , it's possible that no testing occurs at all, or less testing is happening than intended, with at most a warning message in the test result output. with typos in the support matrix, this problem could happen even with a fully populated facterdb. i think rspec-puppet-facts should throw an error if facts for a given os name and release are not found. i'm guessing this precludes the use of facterdb.get_facts , the api of which seems to be the root cause of this issue.